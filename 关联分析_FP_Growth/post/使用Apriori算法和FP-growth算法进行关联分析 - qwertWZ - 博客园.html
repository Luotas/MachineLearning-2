<!DOCTYPE html>
<!-- saved from url=(0046)https://www.cnblogs.com/qwertWZ/p/4510857.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin">
    <meta property="og:description" content="系列文章：《机器学习实战》学习笔记 最近看了《机器学习实战》中的第11章（使用Apriori算法进行关联分析）和第12章（使用FP-growth算法来高效发现频繁项集）。正如章节标题所示，这两章讲了无">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园</title>
    
    <link rel="stylesheet" href="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/blog-common.min.css">
    <link id="MainCss" rel="stylesheet" href="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/bundle-codinglife.min.css">
    <link type="text/css" rel="stylesheet" href="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/custom.css">
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/bundle-codinglife-mobile.min.css">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/qwertWZ/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/qwertWZ/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/qwertWZ/wlwmanifest.xml">
    <script async="" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/analytics.js"></script><script src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/jquery-2.2.0.min.js"></script>
    <script src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/blog-common.min.js"></script>
    <script>
        var currentBlogId = 121831;
        var currentBlogApp = 'qwertWZ';
        var cb_enable_mathjax = true;
        var isLogined = false;
    </script>
    <script type="text/x-mathjax-config;executed=true">
        MathJax.Hub.Config({
        tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processClass: 'math', processEscapes: true },
        TeX: {
        equationNumbers: { autoNumber: ['AMS'], useLabelIds: true },
        extensions: ['extpfeil.js', 'mediawiki-texvc.js'],
        Macros: {bm: "\\boldsymbol"}
        },
        'HTML-CSS': { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
        });
    </script>
    <script src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/MathJax.js"></script>
    
<link rel="preload" href="https://adservice.google.com/adsid/integrator.js?domain=www.cnblogs.com" as="script"><script type="text/javascript" src="https://adservice.google.com/adsid/integrator.js?domain=www.cnblogs.com"></script><script src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/pubads_impl_2019110401.js" async=""></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none; box-sizing: content-box}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_test {font-style: normal; font-weight: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow: hidden; height: 1px}
.MathJax_test.mjx-test-display {display: table!important}
.MathJax_test.mjx-test-inline {display: inline!important; margin-right: -1px}
.MathJax_test.mjx-test-default {display: block!important; clear: both}
.MathJax_ex_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60ex}
.MathJax_em_box {display: inline-block!important; position: absolute; overflow: hidden; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0; width: 1px; height: 60em}
.mjx-test-inline .MathJax_left_box {display: inline-block; width: 0; float: left}
.mjx-test-inline .MathJax_right_box {display: inline-block; width: 0; float: right}
.mjx-test-display .MathJax_right_box {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.5') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.5') format('woff'), url('https://mathjax.cnblogs.com/2_7_5/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.5') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
    <a name="top"></a>
    
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/qwertWZ/"><img id="blogLogo" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/logo.gif" alt="返回主页"></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/qwertWZ/">TL;DR</a>
</h1>
<h2>
Stay Hungry Stay Foolish
</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/qwertWZ/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/qwertWZ">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/qwertWZ/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">随笔 - 
100&nbsp; </span>
<span id="stats_article_count">文章 - 
0&nbsp; </span>
<span id="stats-comment_count">评论 - 
30</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class="postTitle">
                
<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/qwertWZ/p/4510857.html">使用Apriori算法和FP-growth算法进行关联分析</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body "><a name="_labelTop"></a><div id="navCategory"><p style="font-size:18px"><b>目录</b></p><ul><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label0">1. 关联分析</a></li><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label1">2. Apriori原理</a></li><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label2">3. 使用Apriori算法来发现频繁集</a></li><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label3">4. 使用FP-growth算法来高效发现频繁项集</a></li><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label4">5. 示例：从新闻网站点击流中挖掘新闻报道</a></li><li><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_label5">扩展阅读</a></li></ul></div>
    <p>系列文章：<a href="http://www.cnblogs.com/qwertWZ/p/4510859.html">《机器学习实战》学习笔记</a></p>
<p>最近看了《机器学习实战》中的第11章（使用Apriori算法进行关联分析）和第12章（使用FP-growth算法来高效发现频繁项集）。正如章节标题所示，这两章讲了无监督机器学习方法中的关联分析问题。关联分析可以用于回答"哪些商品经常被同时购买？"之类的问题。书中举了一些关联分析的例子:</p>
<ul>
<li>通过查看哪些商品经常在一起购买，可以帮助商店了解用户的购买行为。这种从数据海洋中抽取的知识可以用于商品定价、市场促销、存活管理等环节。</li>
<li>在美国国会投票记录中发现关联规则。在一个国会投票记录的数据集中发现议案投票的相关性，（原文：这里只是出于娱乐的目的，不过也可以……）使用分析结果来为政治竞选活动服务，或者预测选举官员会如何投票。</li>
<li>发现毒蘑菇的相似特征。这里只对包含某个特定元素（有毒性）的项集感兴趣，从中寻找毒蘑菇中的一些公共特征，利用这些特征来避免吃到那些有毒蘑菇。</li>
<li>在Twitter源中发现一些共现词。对于给定搜索词，发现推文中频繁出现的单词集合。</li>
<li>从新闻网站点击流中挖掘新闻流行趋势，挖掘哪些新闻广泛被用户浏览到。</li>
<li>搜索引擎推荐，在用户输入查询词时推荐同相关的查询词项。</li>
</ul>
<p>从大规模数据集中寻找物品间的隐含关系被称作<strong>关联分析（association analysis）</strong>或者<strong>关联规则学习（association rule learning）</strong>。这里的主要问题在于，寻找物品的不同组合是一项十分耗时的任务，所需的计算代价很高，蛮力搜索方法并不能解决这个问题，所以需要用更智能的方法在合理的时间范围内找到频繁项集。本文分别介绍如何使用Apriori算法和FP-growth算法来解决上述问题。</p>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label0"></a></div><h1>1. 关联分析</h1>
<p>关联分析是在大规模数据集中寻找有趣关系的任务。这些关系可以有两种形式：</p>
<ul>
<li>频繁项集</li>
<li>关联规则</li>
</ul>
<p><strong>频繁项集（frequent item sets）</strong>是经常出现在一块儿的物品的集合，<strong>关联规则（association rules）</strong>暗示两种物品之间可能存在很强的关系。</p>
<p>下面用一个例子来说明这两种概念：图1给出了某个杂货店的交易清单。</p>
<table style="width: 396px;" border="1" cellspacing="0" cellpadding="2">
<tbody>
<tr>
<td valign="top" width="91">
<p>交易号码</p>
</td>
<td valign="top" width="303">
<p>商品</p>
</td>
</tr>
<tr>
<td valign="top" width="94">
<p>0</p>
</td>
<td valign="top" width="301">
<p>豆奶，莴苣</p>
</td>
</tr>
<tr>
<td valign="top" width="96">
<p>1</p>
</td>
<td valign="top" width="300">
<p>莴苣，尿布，葡萄酒，甜菜</p>
</td>
</tr>
<tr>
<td valign="top" width="97">
<p>2</p>
</td>
<td valign="top" width="299">
<p>豆奶，尿布，葡萄酒，橙汁</p>
</td>
</tr>
<tr>
<td valign="top" width="98">
<p>3</p>
</td>
<td valign="top" width="298">
<p>莴苣，豆奶，尿布，葡萄酒</p>
</td>
</tr>
<tr>
<td valign="top" width="99">
<p>4</p>
</td>
<td valign="top" width="298">
<p>莴苣，豆奶，尿布，橙汁</p>
</td>
</tr>
</tbody>
</table>
<p>图1 某杂货店交易清单</p>
<p>频繁项集是指那些经常出现在一起的商品集合，图中的集合{葡萄酒,尿布,豆奶}就是频繁项集的一个例子。从这个数据集中也可以找到诸如尿布-&gt;葡萄酒的关联规则，即如果有人买了尿布，那么他很可能也会买葡萄酒。</p>
<p>我们用支持度和可信度来度量这些有趣的关系。一个项集的<strong>支持度（support）</strong>被定义数据集中包含该项集的记录所占的比例。如上图中，{豆奶}的支持度为4/5，{豆奶,尿布}的支持度为3/5。支持度是针对项集来说的，因此可以定义一个<em>最小支持度</em>，而只保留满足最小值尺度的项集。</p>
<p><strong>可信度</strong>或<strong>置信度（confidence）</strong>是针对关联规则来定义的。规则{尿布}➞{啤酒}的可信度被定义为"支持度({尿布,啤酒})/支持度({尿布})"，由于{尿布,啤酒}的支持度为3/5，尿布的支持度为4/5，所以"尿布➞啤酒"的可信度为3/4。这意味着对于包含"尿布"的所有记录，我们的规则对其中75%的记录都适用。</p>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label1"></a></div><h1>2. Apriori原理</h1>
<p>假设我们有一家经营着4种商品（商品0，商品1，商品2和商品3）的杂货店，2图显示了所有商品之间所有的可能组合：</p>
<p style="text-align: center;"><img style="background-image: none; padding-top: 0px; padding-left: 0px; padding-right: 0px; border-width: 0px;" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/180044483261667.png" alt="" width="505" height="480" border="0"></p>
<p style="text-align: center;">图2 集合{0,1,2,3,4}中所有可能的项集组合</p>
<p>对于单个项集的支持度，我们可以通过遍历每条记录并检查该记录是否包含该项集来计算。对于包含N中物品的数据集共有<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 3.688em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.894em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.25em, 1002.84em, 2.497em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="msubsup" id="MathJax-Span-3"><span style="display: inline-block; position: relative; width: 1.193em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.46em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mn" id="MathJax-Span-4" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -4.419em; left: 0.513em;"><span class="mi" id="MathJax-Span-5" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span><span class="mo" id="MathJax-Span-6" style="font-family: MathJax_Main; padding-left: 0.23em;">−</span><span class="mn" id="MathJax-Span-7" style="font-family: MathJax_Main; padding-left: 0.23em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.139em; border-left: 0px solid; width: 0px; height: 1.361em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>N</mi></msup><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2^N-1 </script>种项集组合，重复上述计算过程是不现实的。</p>
<p>研究人员发现一种所谓的Apriori原理，可以帮助我们减少计算量。<strong>Apriori原理是说如果某个项集是频繁的，那么它的所有子集也是频繁的。</strong>更常用的是它的逆否命题，即<span style="text-decoration: underline;">如果一个项集是非频繁的，那么它的所有超集也是非频繁的</span>。</p>
<p>在图3中，已知阴影项集{2,3}是非频繁的。利用这个知识，我们就知道项集{0,2,3}，{1,2,3}以及{0,1,2,3}也是非频繁的。也就是说，一旦计算出了{2,3}的支持度，知道它是非频繁的后，就可以紧接着排除{0,2,3}、{1,2,3}和{0,1,2,3}。</p>
<p style="text-align: center;"><img src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/180044489672795.png" alt="" width="501" height="480"></p>
<p style="text-align: center;">图3 图中给出了所有可能的项集，其中非频繁项集用灰色表示。</p>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label2"></a></div><h1>3. 使用Apriori算法来发现频繁集</h1>
<p>前面提到，关联分析的目标包括两项：发现频繁项集和发现关联规则。首先需要找到频繁项集，然后才能获得关联规则（正如前文所讲，计算关联规则的可信度需要用到频繁项集的支持度）。</p>
<p>Apriori算法是发现频繁项集的一种方法。Apriori算法的两个输入参数分别是最小支持度和数据集。该算法首先会生成所有单个元素的项集列表。接着扫描数据集来查看哪些项集满足最小支持度要求，那些不满足最小支持度的集合会被去掉。然后，对剩下来的集合进行组合以生成包含两个元素的项集。接下来，再重新扫描交易记录，去掉不满足最小支持度的项集。该过程重复进行直到所有项集都被去掉。</p>
<h2>3.1 生成候选项集</h2>
<p>数据集扫描的伪代码大致如下：</p>
<blockquote>
<p><span style="font-family: 楷体;"><span style="font-family: &#39;Courier New&#39;;">对数据集中的每条交易记录tran：<br>&nbsp;&nbsp;&nbsp; 对每个候选项集can：<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 检查can是否是tran的子集<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果是，则增加can的计数<br>对每个候选项集：<br>&nbsp;&nbsp;&nbsp; 如果其支持度不低于最小值，则保留该项集<br>返回所有频繁项集列表</span></span></p>









</blockquote>
<p>下面看一下实际代码，建立一个apriori.py文件并加入一下代码：</p>
<div><div id="highlighter_507282" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py comments"># coding=utf-8</code></div><div class="line number2 index1 alt1"><code class="py keyword">from</code> <code class="py plain">numpy </code><code class="py keyword">import</code> <code class="py keyword">*</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="py keyword">def</code> <code class="py plain">loadDataSet():</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">[[</code><code class="py value">1</code><code class="py plain">, </code><code class="py value">3</code><code class="py plain">, </code><code class="py value">4</code><code class="py plain">], [</code><code class="py value">2</code><code class="py plain">, </code><code class="py value">3</code><code class="py plain">, </code><code class="py value">5</code><code class="py plain">], [</code><code class="py value">1</code><code class="py plain">, </code><code class="py value">2</code><code class="py plain">, </code><code class="py value">3</code><code class="py plain">, </code><code class="py value">5</code><code class="py plain">], [</code><code class="py value">2</code><code class="py plain">, </code><code class="py value">5</code><code class="py plain">]]</code></div></div></td></tr></tbody></table></div></div>
<p>其中numpy为程序中需要用到的Python库。</p>
<div><div id="highlighter_221405" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">createC1(dataSet):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">C1 </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">transaction </code><code class="py keyword">in</code> <code class="py plain">dataSet:</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">transaction:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py keyword">not</code> <code class="py plain">[item] </code><code class="py keyword">in</code> <code class="py plain">C1:</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">C1.append([item])</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">C1.sort()</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py functions">map</code><code class="py plain">(</code><code class="py functions">frozenset</code><code class="py plain">, C1)</code></div></div></td></tr></tbody></table></div></div>
<p>其中C1即为元素个数为1的项集（非频繁项集，因为还没有同最小支持度比较）。<span style="font-family: &#39;Courier New&#39;;">map(frozenset, C1)</span>的语义是将C1由Python列表转换为不变集合（frozenset，Python中的数据结构）。</p>
<div><div id="highlighter_915162" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">scanD(D, Ck, minSupport):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">ssCnt </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">tid </code><code class="py keyword">in</code> <code class="py plain">D:</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">can </code><code class="py keyword">in</code> <code class="py plain">Ck:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">can.issubset(tid):</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">ssCnt[can] </code><code class="py keyword">=</code> <code class="py plain">ssCnt.get(can, </code><code class="py value">0</code><code class="py plain">) </code><code class="py keyword">+</code> <code class="py value">1</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">numItems </code><code class="py keyword">=</code> <code class="py functions">float</code><code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(D))</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retList </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">supportData </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">key </code><code class="py keyword">in</code> <code class="py plain">ssCnt:</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">support </code><code class="py keyword">=</code> <code class="py plain">ssCnt[key] </code><code class="py keyword">/</code> <code class="py plain">numItems</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">support &gt;</code><code class="py keyword">=</code> <code class="py plain">minSupport:</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retList.insert(</code><code class="py value">0</code><code class="py plain">, key)</code></div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">supportData[key] </code><code class="py keyword">=</code> <code class="py plain">support</code></div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">retList, supportData</code></div></div></td></tr></tbody></table></div></div>
<p>其中D为全部数据集，Ck为大小为k（包含k个元素）的候选项集，minSupport为设定的最小支持度。返回值中retList为在Ck中找出的频繁项集（支持度大于minSupport的），supportData记录各频繁项集的支持度。</p>
<p>retList.insert(0, key)一行将频繁项集插入返回列表的首部。</p>
<h2>3.2 完整的Apriori算法</h2>
<p>整个Apriori算法的伪代码如下：</p>
<blockquote>
<p><span style="font-family: &#39;Courier New&#39;;">当集合中项的个数大于0时：<br>&nbsp;&nbsp;&nbsp; 构建一个由k个项组成的候选项集的列表（k从1开始）<br>&nbsp;&nbsp;&nbsp; 计算候选项集的支持度，删除非频繁项集<br>&nbsp;&nbsp;&nbsp; 构建由k+1项组成的候选项集的列表</span></p>









</blockquote>
<p>程序代码如下：</p>
<div><div id="highlighter_59804" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">aprioriGen(Lk, k):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retList </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">lenLk </code><code class="py keyword">=</code> <code class="py functions">len</code><code class="py plain">(Lk)</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">i </code><code class="py keyword">in</code> <code class="py functions">range</code><code class="py plain">(lenLk):</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">j </code><code class="py keyword">in</code> <code class="py functions">range</code><code class="py plain">(i </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">, lenLk):</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 前k-2项相同时，将两个集合合并</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">L1 </code><code class="py keyword">=</code> <code class="py functions">list</code><code class="py plain">(Lk[i])[:k</code><code class="py keyword">-</code><code class="py value">2</code><code class="py plain">]; L2 </code><code class="py keyword">=</code> <code class="py functions">list</code><code class="py plain">(Lk[j])[:k</code><code class="py keyword">-</code><code class="py value">2</code><code class="py plain">]</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">L1.sort(); L2.sort()</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">L1 </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py plain">L2:</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retList.append(Lk[i] | Lk[j])</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">retList</code></div></div></td></tr></tbody></table></div></div>
<p>该函数通过频繁项集列表<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-8" style="width: 1.477em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.137em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1001.14em, 2.611em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-9"><span class="msubsup" id="MathJax-Span-10"><span style="display: inline-block; position: relative; width: 1.137em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.63em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math-italic;">L</span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.683em;"><span class="mi" id="MathJax-Span-12" style="font-size: 70.7%; font-family: MathJax_Math-italic;">k</span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mi>k</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> L_k </script>和项集个数k生成候选项集<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-13" style="width: 2.611em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.044em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1002.04em, 2.667em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-14"><span class="msubsup" id="MathJax-Span-15"><span style="display: inline-block; position: relative; width: 2.044em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.74em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.74em;"><span class="texatom" id="MathJax-Span-17"><span class="mrow" id="MathJax-Span-18"><span class="mi" id="MathJax-Span-19" style="font-size: 70.7%; font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-20" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-21" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-3"> C_{k+1} </script>。</p>
<p>注意其生成的过程中，首选对每个项集按元素排序，然后每次比较两个项集，只有在前k-1项相同时才将这两项合并。这样做是因为函数并非要两两合并各个集合，那样生成的集合并非都是k+1项的。在限制项数为k+1的前提下，只有在前k-1项相同、最后一项不相同的情况下合并才为所需要的新候选项集。</p>
<p>由于Python中使用下标0表示第一个元素，因此代码中的<strong>[:k-2]</strong>的实际作用为取列表的前k-1个元素。</p>
<div><div id="highlighter_656584" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">apriori(dataSet, minSupport</code><code class="py keyword">=</code><code class="py value">0.5</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">C1 </code><code class="py keyword">=</code> <code class="py plain">createC1(dataSet)</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">D </code><code class="py keyword">=</code> <code class="py functions">map</code><code class="py plain">(</code><code class="py functions">set</code><code class="py plain">, dataSet)</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">L1, supportData </code><code class="py keyword">=</code> <code class="py plain">scanD(D, C1, minSupport)</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">L </code><code class="py keyword">=</code> <code class="py plain">[L1]</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">k </code><code class="py keyword">=</code> <code class="py value">2</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">while</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(L[k</code><code class="py keyword">-</code><code class="py value">2</code><code class="py plain">]) &gt; </code><code class="py value">0</code><code class="py plain">):</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Ck </code><code class="py keyword">=</code> <code class="py plain">aprioriGen(L[k</code><code class="py keyword">-</code><code class="py value">2</code><code class="py plain">], k)</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Lk, supK </code><code class="py keyword">=</code> <code class="py plain">scanD(D, Ck, minSupport)</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">supportData.update(supK)</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">L.append(Lk)</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">k </code><code class="py keyword">+</code><code class="py keyword">=</code> <code class="py value">1</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">L, supportData</code></div></div></td></tr></tbody></table></div></div>
<p>该函数为Apriori算法的主函数，按照前述伪代码的逻辑执行。Ck表示项数为k的候选项集，最初的C1通过createC1()函数生成。Lk表示项数为k的频繁项集，supK为其支持度，Lk和supK由scanD()函数通过Ck计算而来。</p>
<p>函数返回的L和supportData为所有的频繁项集及其支持度，因此在每次迭代中都要将所求得的Lk和supK添加到L和supportData中。</p>
<p>代码测试（在Python提示符下输入）：</p>
<div><div id="highlighter_223037" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">apriori</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; dataSet </code><code class="py keyword">=</code> <code class="py plain">apriori.loadDataSet()</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; dataSet</code></div><div class="line number4 index3 alt1"><code class="py plain">&gt;&gt;&gt; C1 </code><code class="py keyword">=</code> <code class="py plain">apriori.createC1(dataSet)</code></div><div class="line number5 index4 alt2"><code class="py plain">&gt;&gt;&gt; D </code><code class="py keyword">=</code> <code class="py functions">map</code><code class="py plain">(</code><code class="py functions">set</code><code class="py plain">, dataSet)</code></div><div class="line number6 index5 alt1"><code class="py plain">&gt;&gt;&gt; D</code></div><div class="line number7 index6 alt2"><code class="py plain">&gt;&gt;&gt; L1, suppDat </code><code class="py keyword">=</code> <code class="py plain">apriori.scanD(D, C1, </code><code class="py value">0.5</code><code class="py plain">)</code></div><div class="line number8 index7 alt1"><code class="py plain">&gt;&gt;&gt; L1</code></div><div class="line number9 index8 alt2"><code class="py plain">&gt;&gt;&gt; L, suppData </code><code class="py keyword">=</code> <code class="py plain">apriori.apriori(dataSet)</code></div><div class="line number10 index9 alt1"><code class="py plain">&gt;&gt;&gt; L</code></div><div class="line number11 index10 alt2"><code class="py plain">&gt;&gt;&gt; L, suppData </code><code class="py keyword">=</code> <code class="py plain">apriori.apriori(dataSet, minSupport</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">)</code></div><div class="line number12 index11 alt1"><code class="py plain">&gt;&gt;&gt; L</code></div></div></td></tr></tbody></table></div></div>
<p>L返回的值为frozenset列表的形式：</p>
<blockquote>
<p><span style="font-family: &#39;Courier New&#39;;">[[frozenset([1]), frozenset([3]), frozenset([2]), frozenset([5])],<br><span style="font-family: &#39;Courier New&#39;;">[frozenset([1, 3]), frozenset([2, 5]), frozenset([2, 3]), frozenset([3, 5])],<br>[frozenset([2, 3, 5])], []]</span></span></p>









</blockquote>
<p>即L[0]为项数为1的频繁项集：</p>
<blockquote>
<p><span style="font-family: &#39;Courier New&#39;;">[frozenset([1]), frozenset([3]), frozenset([2]), frozenset([5])]</span></p>









</blockquote>
<p>L[1]为项数为2的频繁项集：</p>
<blockquote>
<p><span style="font-family: &#39;Courier New&#39;;">[frozenset([1, 3]), frozenset([2, 5]), frozenset([2, 3]), frozenset([3, 5])]</span></p>









</blockquote>
<p>依此类推。</p>
<p>suppData为一个字典，它包含项集的支持度。</p>
<h2>3.3 从频繁集中挖掘相关规则</h2>
<p>解决了频繁项集问题，下一步就可以解决相关规则问题。</p>
<p>要找到关联规则，我们首先从一个频繁项集开始。从杂货店的例子可以得到，如果有一个频繁项集{豆奶, 莴苣}，那么就可能有一条关联规则“豆奶➞莴苣”。这意味着如果有人购买了豆奶，那么在统计上他会购买莴苣的概率较大。注意这一条反过来并不总是成立，也就是说，可信度(“豆奶➞莴苣”)并不等于可信度(“莴苣➞豆奶”)。</p>
<p>前文也提到过，一条规则P➞H的可信度定义为support(P | H)/support(P)，其中“|”表示P和H的并集。可见可信度的计算是基于项集的支持度的。</p>
<p>图4给出了从项集{0,1,2,3}产生的所有关联规则，其中阴影区域给出的是低可信度的规则。可以发现如果{0,1,2}➞{3}是一条低可信度规则，那么所有其他以3作为后件（箭头右部包含3）的规则均为低可信度的。</p>
<p align="center"><a href="http://images0.cnblogs.com/blog/327901/201505/181255368078648.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="image" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/181255402917480.png" alt="image" width="640" height="383" border="0"></a></p>
<p align="center">图4 频繁项集{0,1,2,3}的关联规则网格示意图</p>
<p>&nbsp;</p>
<p>可以观察到，如果某条规则并不满足最小可信度要求，那么该规则的所有子集也不会满足最小可信度要求。以图4为例，假设规则{0,1,2} ➞ {3}并不满足最小可信度要求，那么就知道任何左部为{0,1,2}子集的规则也不会满足最小可信度要求。可以利用关联规则的上述性质属性来减少需要测试的规则数目，类似于Apriori算法求解频繁项集。</p>
<h3>1 书中的原始代码</h3>
<p>1 关联规则生成函数：</p>
<div><div id="highlighter_392835" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">def generateRules(L, supportData, minConf=0.7):</code></div><div class="line number2 index1 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">bigRuleList = []</code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">for</code> <code class="csharp plain">i </code><code class="csharp keyword">in</code> <code class="csharp plain">range(1, len(L)):</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">for</code> <code class="csharp plain">freqSet </code><code class="csharp keyword">in</code> <code class="csharp plain">L[i]:</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">H1 = [frozenset([item]) </code><code class="csharp keyword">for</code> <code class="csharp plain">item </code><code class="csharp keyword">in</code> <code class="csharp plain">freqSet]</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">if</code> <code class="csharp plain">(i &gt; 1):</code></div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp preprocessor"># 三个及以上元素的集合</code></div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">rulesFromConseq(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number9 index8 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">else</code><code class="csharp plain">:</code></div><div class="line number10 index9 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp preprocessor"># 两个元素的集合</code></div><div class="line number11 index10 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">calcConf(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number12 index11 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">bigRuleList</code></div></div></td></tr></tbody></table></div></div>
<p>这个函数是主函数，调用其他两个函数。其他两个函数是rulesFromConseq()和calcConf()，分别用于<em>生成候选规则集合</em>以及<em>对规则进行评估（计算支持度）</em>。</p>
<p>函数generateRules()有3个参数：频繁项集列表L、包含那些频繁项集支持数据的字典supportData、最小可信度阈值minConf。函数最后要生成一个包含可信度的规则列表bigRuleList，后面可以基于可信度对它们进行排序。L和supportData正好为函数apriori()的输出。该函数遍历L中的每一个频繁项集，并对每个频繁项集构建只包含单个元素集合的列表H1。代码中的i指示当前遍历的频繁项集包含的元素个数，freqSet为当前遍历的频繁项集（回忆L的组织结构是先把具有相同元素个数的频繁项集组织成列表，再将各个列表组成一个大列表，所以为遍历L中的频繁项集，需要使用两层for循环）。</p>
<p>2 辅助函数——计算规则的可信度，并过滤出满足最小可信度要求的规则</p>
<div><div id="highlighter_977637" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">calcConf(freqSet, H, supportData, brl, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments">''' 对候选规则集进行评估 '''</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">prunedH </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">conseq </code><code class="py keyword">in</code> <code class="py plain">H:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">conf </code><code class="py keyword">=</code> <code class="py plain">supportData[freqSet] </code><code class="py keyword">/</code> <code class="py plain">supportData[freqSet </code><code class="py keyword">-</code> <code class="py plain">conseq]</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">conf &gt;</code><code class="py keyword">=</code> <code class="py plain">minConf:</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code> <code class="py plain">freqSet </code><code class="py keyword">-</code> <code class="py plain">conseq, </code><code class="py string">'--&gt;'</code><code class="py plain">, conseq, </code><code class="py string">'conf:'</code><code class="py plain">, conf</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">brl.append((freqSet </code><code class="py keyword">-</code> <code class="py plain">conseq, conseq, conf))</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">prunedH.append(conseq)</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">prunedH</code></div></div></td></tr></tbody></table></div></div>
<p>计算规则的可信度以及找出满足最小可信度要求的规则。函数返回一个满足最小可信度要求的规则列表，并将这个规则列表添加到主函数的bigRuleList中（通过参数brl）。返回值prunedH保存规则列表的右部，这个值将在下一个函数<span style="font-family: &#39;Courier New&#39;;">rulesFromConseq()</span>中用到。</p>
<p>3 辅助函数——根据当前候选规则集H生成下一层候选规则集</p>
<div><div id="highlighter_334384" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">rulesFromConseq(freqSet, H, supportData, brl, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments">''' 生成候选规则集 '''</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">m </code><code class="py keyword">=</code> <code class="py functions">len</code><code class="py plain">(H[</code><code class="py value">0</code><code class="py plain">])</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(freqSet) &gt; (m </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)):</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Hmpl </code><code class="py keyword">=</code> <code class="py plain">aprioriGen(H, m </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Hmpl </code><code class="py keyword">=</code> <code class="py plain">calcConf(freqSet, Hmpl, supportData, brl, minConf)</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(Hmpl) &gt; </code><code class="py value">1</code><code class="py plain">):</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">rulesFromConseq(freqSet, Hmpl, supportData, brl, minConf)</code></div></div></td></tr></tbody></table></div></div>
<p>从最初的项集中生成更多的关联规则。该函数有两个参数：频繁项集freqSet，可以出现在规则右部的元素列表H。其余参数：supportData保存项集的支持度，brl保存生成的关联规则，minConf同主函数。函数先计算H中的频繁项集大小m。接下来查看该频繁项集是否大到可以移除大小为m的子集。如果可以的话，则将其移除。使用函数aprioriGen()来生成H中元素的无重复组合，结果保存在Hmp1中，这也是下一次迭代的H列表。</p>
<p>&nbsp;</p>
<p>实际运行效果：</p>
<div><div id="highlighter_447194" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">apriori</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; dataSet </code><code class="py keyword">=</code> <code class="py plain">apriori.loadDataSet()</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; L, suppData </code><code class="py keyword">=</code> <code class="py plain">apriori.apriori(dataSet, minSupport</code><code class="py keyword">=</code><code class="py value">0.5</code><code class="py plain">)</code></div><div class="line number4 index3 alt1"><code class="py plain">&gt;&gt;&gt; rules </code><code class="py keyword">=</code> <code class="py plain">apriori.generateRules(L, suppData, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">)</code></div><div class="line number5 index4 alt2"><code class="py plain">&gt;&gt;&gt; rules</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<p>frozenset([1]) --&gt; frozenset([3]) conf: 1.0<br>frozenset([5]) --&gt; frozenset([2]) conf: 1.0<br>frozenset([2]) --&gt; frozenset([5]) conf: 1.0 </p>









</blockquote>
<div><div id="highlighter_470250" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; rules </code><code class="py keyword">=</code> <code class="py plain">apriori.generateRules(L, suppData, minConf</code><code class="py keyword">=</code><code class="py value">0.5</code><code class="py plain">)</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; rules</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<p>frozenset([3]) --&gt; frozenset([1]) conf: 0.666666666667<br>frozenset([1]) --&gt; frozenset([3]) conf: 1.0<br>frozenset([5]) --&gt; frozenset([2]) conf: 1.0<br>frozenset([2]) --&gt; frozenset([5]) conf: 1.0<br>frozenset([3]) --&gt; frozenset([2]) conf: 0.666666666667<br>frozenset([2]) --&gt; frozenset([3]) conf: 0.666666666667<br>frozenset([5]) --&gt; frozenset([3]) conf: 0.666666666667<br>frozenset([3]) --&gt; frozenset([5]) conf: 0.666666666667<br>frozenset([5]) --&gt; frozenset([2, 3]) conf: 0.666666666667<br>frozenset([3]) --&gt; frozenset([2, 5]) conf: 0.666666666667<br>frozenset([2]) --&gt; frozenset([3, 5]) conf: 0.666666666667</p>









</blockquote>
<p>到目前为止，如果代码同书中一样的话，输出就是这样。在这里首先使用参数最小支持度minSupport = 0.5计算频繁项集L和支持度suppData，然后分别计算最小可信度minConf = 0.7和minConf = 0.5的关联规则。</p>
<h3>2 关于rulesFromConseq()函数的问题</h3>
<p>如果仔细看下上述代码和输出，会发现这里面是一些问题的。</p>
<p>1 问题的提出</p>
<p>频繁项集L的值前面提到过。我们在其中计算通过{2, 3, 5}生成的关联规则，可以发现关联规则{3, 5}➞{2}和{2, 3}➞{5}的可信度都应该为1.0的，因而也应该包括在当minConf = 0.7时的rules中——但是这在前面的运行结果中并没有体现出来。minConf = 0.5时也是一样，{3, 5}➞{2}的可信度为1.0，{2, 5}➞{3}的可信度为2/3，{2, 3}➞{5}的可信度为1.0，也没有体现在rules中。</p>
<p>通过分析程序代码，我们可以发现：</p>
<ul>
<li>当i = 1时，generateRules()函数直接调用了calcConf()函数直接计算其可信度，因为这时L[1]中的频繁项集均包含两个元素，可以直接生成和判断候选关联规则。比如L[1]中的{2, 3}，生成的候选关联规则为{2}➞{3}、{3}➞{2}，这样就可以了。</li>
<li>当i &gt; 1时，generateRules()函数调用了rulesFromConseq()函数，这时L[i]中至少包含3个元素，如{2, 3, 5}，对候选关联规则的生成和判断的过程需要分层进行（图4）。这里，将初始的H1（表示初始关联规则的右部，即箭头右边的部分）作为参数传递给了rulesFromConseq()函数。 </li>









</ul>
<p>例如，对于频繁项集{a, b, c, …}，H1的值为[a, b, c, …]（代码中实际为frozenset类型）。如果将H1带入计算可信度的calcConf()函数，在函数中会依次计算关联规则{b, c, d, …}➞{a}、{a, c, d, …}➞{b}、{a, b, d, …}➞{c}……的支持度，并保存支持度大于最小支持度的关联规则，并保存这些规则的右部（prunedH，即对H的过滤，删除支持度过小的关联规则）。</p>
<p>当i &gt; 1时没有直接调用calcConf()函数计算通过H1生成的规则集。在rulesFromConseq()函数中，首先获得当前H的元素数m = len(H[0])（记当前的H为<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-22" style="width: 1.93em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.533em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1001.53em, 2.611em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-23"><span class="msubsup" id="MathJax-Span-24"><span style="display: inline-block; position: relative; width: 1.533em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="mi" id="MathJax-Span-26" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mi>m</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4"> H_m </script>）。当<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-27" style="width: 1.93em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.533em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1001.53em, 2.611em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-28"><span class="msubsup" id="MathJax-Span-29"><span style="display: inline-block; position: relative; width: 1.533em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="mi" id="MathJax-Span-31" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.218em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mi>m</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> H_m </script>可以进一步合并为m+1元素数的集合<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-32" style="width: 3.064em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1002.44em, 2.667em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-33"><span class="msubsup" id="MathJax-Span-34"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="texatom" id="MathJax-Span-36"><span class="mrow" id="MathJax-Span-37"><span class="mi" id="MathJax-Span-38" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mo" id="MathJax-Span-39" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-40" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mo>+</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> H_{m+1} </script>时（判断条件：len(freqSet) &gt; (m + 1)），依次：</p>
<ul>
<li>生成<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-41" style="width: 3.064em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1002.44em, 2.667em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-42"><span class="msubsup" id="MathJax-Span-43"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="texatom" id="MathJax-Span-45"><span class="mrow" id="MathJax-Span-46"><span class="mi" id="MathJax-Span-47" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mo" id="MathJax-Span-48" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-49" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mo>+</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> H_{m+1} </script>：Hmpl = aprioriGen(H, m + 1)</li>
<li>计算<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-50" style="width: 3.064em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1002.44em, 2.667em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-51"><span class="msubsup" id="MathJax-Span-52"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="texatom" id="MathJax-Span-54"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mo" id="MathJax-Span-57" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-58" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mo>+</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-8"> H_{m+1} </script>的可信度：Hmpl = calcConf(freqSet, Hmpl, …)</li>
<li>递归计算由<span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-59" style="width: 3.064em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.42em, 1002.44em, 2.667em, -999.997em); top: -2.265em; left: 0em;"><span class="mrow" id="MathJax-Span-60"><span class="msubsup" id="MathJax-Span-61"><span style="display: inline-block; position: relative; width: 2.44em; height: 0px;"><span style="position: absolute; clip: rect(3.177em, 1000.91em, 4.198em, -999.997em); top: -4.022em; left: 0em;"><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.853em;"><span class="texatom" id="MathJax-Span-63"><span class="mrow" id="MathJax-Span-64"><span class="mi" id="MathJax-Span-65" style="font-size: 70.7%; font-family: MathJax_Math-italic;">m</span><span class="mo" id="MathJax-Span-66" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-67" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.028em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.27em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.289em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mo>+</mo><mn>1</mn></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> H_{m+1} </script>生成的关联规则：rulesFromConseq(freqSet, Hmpl, …) </li>









</ul>
<p>所以这里的问题是，在i&gt;1时，rulesFromConseq()函数中并没有调用calcConf()函数计算<strong>H1</strong>的可信度，而是直接由H1生成H2，从H2开始计算关联规则——于是由元素数&gt;3的频繁项集生成的{a, b, c, …}➞{x}形式的关联规则（图4中的第2层）均缺失了。由于代码示例数据中的对H1的剪枝prunedH没有删除任何元素，结果只是“巧合”地缺失了一层。正常情况下如果没有对H1进行过滤，直接生成H2，将给下一层带入错误的结果（如图4中的012➞3会被错误得留下来）。</p>
<p>2 对问题代码的修改</p>
<p>在i&gt;1时，将对H1调用calcConf()的过程加上就可以了。比如可以这样：</p>
<div><div id="highlighter_562836" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">generateRules2(L, supportData, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">bigRuleList </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">i </code><code class="py keyword">in</code> <code class="py functions">range</code><code class="py plain">(</code><code class="py value">1</code><code class="py plain">, </code><code class="py functions">len</code><code class="py plain">(L)):</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">freqSet </code><code class="py keyword">in</code> <code class="py plain">L[i]:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">H1 </code><code class="py keyword">=</code> <code class="py plain">[</code><code class="py functions">frozenset</code><code class="py plain">([item]) </code><code class="py keyword">for</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">freqSet]</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(i &gt; </code><code class="py value">1</code><code class="py plain">):</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 三个及以上元素的集合</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">H1 </code><code class="py keyword">=</code> <code class="py plain">calcConf(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">rulesFromConseq(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">else</code><code class="py plain">:</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 两个元素的集合</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">calcConf(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">bigRuleList</code></div></div></td></tr></tbody></table></div></div>
<p>这里就只需要修改generateRules()函数。这样实际运行效果中，刚才丢失的那几个关联规则就都出来了。</p>
<p>&nbsp;</p>
<p>进一步修改：当i=1时的else部分并没有独特的逻辑，这个if语句可以合并，然后再修改rulesFromConseq()函数，保证其会调用calcConf(freqSet, H1, …)：</p>
<div><div id="highlighter_744042" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">generateRules3(L, supportData, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">bigRuleList </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">i </code><code class="py keyword">in</code> <code class="py functions">range</code><code class="py plain">(</code><code class="py value">1</code><code class="py plain">, </code><code class="py functions">len</code><code class="py plain">(L)):</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">freqSet </code><code class="py keyword">in</code> <code class="py plain">L[i]:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">H1 </code><code class="py keyword">=</code> <code class="py plain">[</code><code class="py functions">frozenset</code><code class="py plain">([item]) </code><code class="py keyword">for</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">freqSet]</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">rulesFromConseq2(freqSet, H1, supportData, bigRuleList, minConf)</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">bigRuleList</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="py keyword">def</code> <code class="py plain">rulesFromConseq2(freqSet, H, supportData, brl, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">m </code><code class="py keyword">=</code> <code class="py functions">len</code><code class="py plain">(H[</code><code class="py value">0</code><code class="py plain">])</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(freqSet) &gt; m): </code><code class="py comments"># 判断长度改为 &gt; m，这时即可以求H的可信度</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Hmpl </code><code class="py keyword">=</code> <code class="py plain">calcConf(freqSet, H, supportData, brl, minConf)</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(Hmpl) &gt; </code><code class="py value">1</code><code class="py plain">): </code><code class="py comments"># 判断求完可信度后是否还有可信度大于阈值的项用来生成下一层H</code></div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">Hmpl </code><code class="py keyword">=</code> <code class="py plain">aprioriGen(Hmpl, m </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">rulesFromConseq2(freqSet, Hmpl, supportData, brl, minConf) </code><code class="py comments"># 递归计算，不变</code></div></div></td></tr></tbody></table></div></div>
<p>运行结果和generateRules2相同。</p>
<p>&nbsp;</p>
<p>进一步修改：消除rulesFromConseq2()函数中的递归项。这个递归纯粹是偷懒的结果，没有简化任何逻辑和增加任何可读性，可以直接用一个循环代替：</p>
<div><div id="highlighter_339935" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">rulesFromConseq3(freqSet, H, supportData, brl, minConf</code><code class="py keyword">=</code><code class="py value">0.7</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">m </code><code class="py keyword">=</code> <code class="py functions">len</code><code class="py plain">(H[</code><code class="py value">0</code><code class="py plain">])</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">while</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(freqSet) &gt; m): </code><code class="py comments"># 判断长度 &gt; m，这时即可求H的可信度</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">H </code><code class="py keyword">=</code> <code class="py plain">calcConf(freqSet, H, supportData, brl, minConf)</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">(</code><code class="py functions">len</code><code class="py plain">(H) &gt; </code><code class="py value">1</code><code class="py plain">): </code><code class="py comments"># 判断求完可信度后是否还有可信度大于阈值的项用来生成下一层H</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">H </code><code class="py keyword">=</code> <code class="py plain">aprioriGen(H, m </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">m </code><code class="py keyword">+</code><code class="py keyword">=</code> <code class="py value">1</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">else</code><code class="py plain">: </code><code class="py comments"># 不能继续生成下一层候选关联规则，提前退出循环</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">break</code></div></div></td></tr></tbody></table></div></div>
<p>另一个主要的区别是去掉了多余的Hmpl变量。运行的结果和generateRules2相同。</p>
<p>至此，一个完整的Apriori算法就完成了。</p>
<h2>3.4 小结</h2>
<p>关联分析是用于发现大数据集中元素间有趣关系的一个工具集，可以采用两种方式来量化这些有趣的关系。第一种方式是使用频繁项集，它会给出经常在一起出现的元素项。第二种方式是关联规则，每条关联规则意味着元素项之间的“如果……那么”关系。</p>
<p>发现元素项间不同的组合是个十分耗时的任务，不可避免需要大量昂贵的计算资源，这就需要一些更智能的方法在合理的时间范围内找到频繁项集。能够实现这一目标的一个方法是Apriori算法，它使用Apriori原理来减少在数据库上进行检查的集合的数目。Apriori原理是说如果一个元素项是不频繁的，那么那些包含该元素的超集也是不频繁的。Apriori算法从单元素项集开始，通过组合满足最小支持度要求的项集来形成更大的集合。支持度用来度量一个集合在原始数据中出现的频率。</p>
<p>关联分析可以用在许多不同物品上。商店中的商品以及网站的访问页面是其中比较常见的例子。</p>
<p>每次增加频繁项集的大小，Apriori算法都会重新扫描整个数据集。当数据集很大时，这会显著降低频繁项集发现的速度。下面会介绍FP-growth算法，和Apriori算法相比，该算法只需要对数据库进行两次遍历，能够显著加快发现频繁项集的速度。</p>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label3"></a></div><h1>4. 使用FP-growth算法来高效发现频繁项集</h1>
<p>FP-growth算法基于Apriori构建，但采用了高级的数据结构减少扫描次数，大大加快了算法速度。FP-growth算法只需要对数据库进行两次扫描，而Apriori算法对于每个潜在的频繁项集都会扫描数据集判定给定模式是否频繁，因此FP-growth算法的速度要比Apriori算法快。</p>
<p>FP-growth算法发现频繁项集的基本过程如下：</p>
<ul>
<li>构建FP树</li>
<li>从FP树中挖掘频繁项集</li>
</ul>
<blockquote>
<p align="left">FP-growth算法</p>
<ul>
<li>优点：一般要快于Apriori。</li>
<li>缺点：实现比较困难，在某些数据集上性能会下降。</li>
<li>适用数据类型：离散型数据。</li>
</ul>
</blockquote>
<h2>4.1 FP树：用于编码数据集的有效方式</h2>
<p>FP-growth算法将数据存储在一种称为FP树的紧凑数据结构中。FP代表频繁模式（Frequent Pattern）。一棵FP树看上去与计算机科学中的其他树结构类似，但是它通过链接（link）来连接相似元素，被连起来的元素项可以看成一个链表。图5给出了FP树的一个例子。</p>
<p align="center"><a href="http://images0.cnblogs.com/blog/327901/201506/152031137322757.jpg"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="机器学习实战.pdf - Adobe Acrobat Pro" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/152031144666898.jpg" alt="机器学习实战.pdf - Adobe Acrobat Pro" width="179" height="240" border="0"></a></p>
<p align="center">图5 一棵FP树，和一般的树结构类似，包含着连接相似节点（值相同的节点）的连接</p>
<p>与搜索树不同的是，一个元素项可以在一棵FP树种出现多次。FP树辉存储项集的出现频率，而每个项集会以路径的方式存储在数中。存在相似元素的集合会共享树的一部分。只有当集合之间完全不同时，树才会分叉。 树节点上给出集合中的单个元素及其在序列中的出现次数，路径会给出该序列的出现次数。</p>
<p>相似项之间的链接称为<strong>节点链接</strong>（node link），用于快速发现相似项的位置。</p>
<p>举例说明，下表用来产生图5的FP树：</p>
<table style="height: 170px; width: 426px;" border="1"><caption>用于生成图5中FP树的事务数据样例</caption>
<tbody>
<tr>
<td style="text-align: center;">事务ID</td>
<td style="text-align: center;">事务中的元素项</td>
</tr>
<tr>
<td style="text-align: center;">001</td>
<td>r, z, h, j, p</td>
</tr>
<tr>
<td style="text-align: center;">002</td>
<td>z, y, x, w, v, u, t, s</td>
</tr>
<tr>
<td style="text-align: center;">003</td>
<td>z</td>
</tr>
<tr>
<td style="text-align: center;">004</td>
<td>r, x, n, o, s</td>
</tr>
<tr>
<td style="text-align: center;">005</td>
<td>y, r, x, z, q, t, p</td>
</tr>
<tr>
<td style="text-align: center;">006</td>
<td>y, z, x, e, q, s, t, m</td>
</tr>
</tbody>
</table>
<p><strong>对FP树的解读：</strong></p>
<p>图5中，元素项z出现了5次，集合{r, z}出现了1次。于是可以得出结论：z一定是自己本身或者和其他符号一起出现了4次。集合{t, s, y, x, z}出现了2次，集合{t, r, y, x, z}出现了1次，z本身单独出现1次。就像这样，FP树的解读方式是读取某个节点开始到根节点的路径。路径上的元素构成一个频繁项集，开始节点的值表示这个项集的支持度。根据图5，我们可以快速读出项集{z}的支持度为5、项集{t, s, y, x, z}的支持度为2、项集{r, y, x, z}的支持度为1、项集{r, s, x}的支持度为1。FP树中会多次出现相同的元素项，也是因为同一个元素项会存在于多条路径，构成多个频繁项集。但是频繁项集的共享路径是会合并的，如图中的{t, s, y, x, z}和{t, r, y, x, z}</p>
<p>和之前一样，我们取一个最小阈值，出现次数低于最小阈值的元素项将被直接忽略。图5中将最小支持度设为3，所以q和p没有在FP中出现。</p>
<p>FP-growth算法的工作流程如下。首先构建FP树，然后利用它来挖掘频繁项集。为构建FP树，需要对原始数据集扫描两遍。<strong>第一遍对所有元素项的出现次数进行计数。</strong>数据库的第一遍扫描用来统计出现的频率，而<strong>第二遍扫描中只考虑那些频繁元素</strong>。</p>
<h2>4.2 构建FP树</h2>
<h3>1 创建FP树的数据结构</h3>
<p>由于树节点的结构比较复杂，我们使用一个类表示。创建文件fpGrowth.py并加入下列代码：</p>
<div><div id="highlighter_131000" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">class</code> <code class="py plain">treeNode:</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">def</code> <code class="py plain">__init__(</code><code class="py color1">self</code><code class="py plain">, nameValue, numOccur, parentNode):</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.name </code><code class="py keyword">=</code> <code class="py plain">nameValue</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.count </code><code class="py keyword">=</code> <code class="py plain">numOccur</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.nodeLink </code><code class="py keyword">=</code> <code class="py color1">None</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.parent </code><code class="py keyword">=</code> <code class="py plain">parentNode</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.children </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">def</code> <code class="py plain">inc(</code><code class="py color1">self</code><code class="py plain">, numOccur):</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py color1">self</code><code class="py plain">.count </code><code class="py keyword">+</code><code class="py keyword">=</code> <code class="py plain">numOccur</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">def</code> <code class="py plain">disp(</code><code class="py color1">self</code><code class="py plain">, ind</code><code class="py keyword">=</code><code class="py value">1</code><code class="py plain">):</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code> <code class="py string">' '</code> <code class="py keyword">*</code> <code class="py plain">ind, </code><code class="py color1">self</code><code class="py plain">.name, </code><code class="py string">' '</code><code class="py plain">, </code><code class="py color1">self</code><code class="py plain">.count</code></div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">child </code><code class="py keyword">in</code> <code class="py color1">self</code><code class="py plain">.children.values():</code></div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">child.disp(ind </code><code class="py keyword">+</code> <code class="py value">1</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>每个树节点由五个数据项组成：</p>
<ul>
<li>name：节点元素名称，在构造时初始化为给定值</li>
<li>count：出现次数，在构造时初始化为给定值</li>
<li>nodeLink：指向下一个相似节点的指针，默认为None</li>
<li>parent：指向父节点的指针，在构造时初始化为给定值</li>
<li>children：指向子节点的字典，以子节点的元素名称为键，指向子节点的指针为值，初始化为空字典</li>
</ul>
<p>成员函数：</p>
<ul>
<li>inc()：增加节点的出现次数值</li>
<li>disp()：输出节点和子节点的FP树结构</li>
</ul>
<p>测试代码：</p>
<div><div id="highlighter_946792" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">fpGrowth</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; rootNode </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.treeNode(</code><code class="py string">'pyramid'</code><code class="py plain">, </code><code class="py value">9</code><code class="py plain">, </code><code class="py color1">None</code><code class="py plain">)</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; rootNode.children[</code><code class="py string">'eye'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.treeNode(</code><code class="py string">'eye'</code><code class="py plain">, </code><code class="py value">13</code><code class="py plain">, </code><code class="py color1">None</code><code class="py plain">)</code></div><div class="line number4 index3 alt1"><code class="py plain">&gt;&gt;&gt; rootNode.children[</code><code class="py string">'phoenix'</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.treeNode(</code><code class="py string">'phoenix'</code><code class="py plain">, </code><code class="py value">3</code><code class="py plain">, </code><code class="py color1">None</code><code class="py plain">)</code></div><div class="line number5 index4 alt2"><code class="py plain">&gt;&gt;&gt; rootNode.disp()</code></div></div></td></tr></tbody></table></div></div>
<h3>2 构建FP树</h3>
<p><strong>头指针表</strong></p>
<p>FP-growth算法还需要一个称为<strong>头指针表</strong>的数据结构，其实很简单，就是用来记录各个元素项的总出现次数的数组，再附带一个指针指向FP树中该元素项的第一个节点。这样每个元素项都构成一条单链表。图示说明：</p>
<p align="center"><a href="http://images0.cnblogs.com/blog/327901/201506/161705147631705.jpg"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="机器学习实战.pdf - Adobe Acrobat Pro" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/161705179041146.jpg" alt="机器学习实战.pdf - Adobe Acrobat Pro" width="602" height="480" border="0"></a></p>
<p align="center">图6 带头指针表的FP树，头指针表作为一个起始指针来发现相似元素项</p>
<p>这里使用Python字典作为数据结构，来保存头指针表。以元素项名称为键，保存出现的总次数和一个指向第一个相似元素项的指针。</p>
<p>第一次遍历数据集会获得每个元素项的出现频率，去掉不满足最小支持度的元素项，生成这个头指针表。</p>
<p>&nbsp;</p>
<p><strong>元素项排序</strong></p>
<p>上文提到过，FP树会合并相同的频繁项集（或相同的部分）。因此为判断两个项集的相似程度需要对项集中的元素进行排序（不过原因也不仅如此，还有其它好处）。排序基于元素项的绝对出现频率（总的出现次数）来进行。在第二次遍历数据集时，会读入每个项集（读取），去掉不满足最小支持度的元素项（过滤），然后对元素进行排序（重排序）。</p>
<p>对示例数据集进行过滤和重排序的结果如下：</p>
<table style="width: 431px;" border="1" cellspacing="0" cellpadding="2">
<tbody>
<tr>
<td valign="top" width="68">事务ID</td>
<td valign="top" width="198">事务中的元素项</td>
<td valign="top" width="163">过滤及重排序后的事务</td>
</tr>
<tr>
<td valign="top" width="68">001</td>
<td valign="top" width="198">r, z, h, j, p</td>
<td valign="top" width="163">z, r</td>
</tr>
<tr>
<td valign="top" width="68">002</td>
<td valign="top" width="198">z, y, x, w, v, u, t, s</td>
<td valign="top" width="163">z, x, y, s, t</td>
</tr>
<tr>
<td valign="top" width="68">003</td>
<td valign="top" width="198">z</td>
<td valign="top" width="163">z</td>
</tr>
<tr>
<td valign="top" width="68">004</td>
<td valign="top" width="198">r, x, n, o, s</td>
<td valign="top" width="163">x, s, r</td>
</tr>
<tr>
<td valign="top" width="68">005</td>
<td valign="top" width="198">y, r, x, z, q, t, p</td>
<td valign="top" width="163">z, x, y, r, t</td>
</tr>
<tr>
<td valign="top" width="68">006</td>
<td valign="top" width="198">y, z, x, e, q, s, t, m</td>
<td valign="top" width="163">z, x, y, s, t</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<p><strong>构建FP树</strong></p>
<p>在对事务记录过滤和排序之后，就可以构建FP树了。从空集开始，将过滤和重排序后的频繁项集一次添加到树中。如果树中已存在现有元素，则增加现有元素的值；如果现有元素不存在，则向树添加一个分支。对前两条事务进行添加的过程：</p>
<p align="center"><a href="http://images0.cnblogs.com/blog/327901/201506/161705192639929.jpg"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="机器学习实战.pdf - Adobe Acrobat Pro" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/161705202634757.jpg" alt="机器学习实战.pdf - Adobe Acrobat Pro" width="640" height="353" border="0"></a></p>
<p align="center">图7 FP树构建过程示意（添加前两条事务）</p>
<p>算法：构建FP树</p>
<blockquote>
<p>输入：数据集、最小值尺度<br>输出：FP树、头指针表<br>1. 遍历数据集，统计各元素项出现次数，创建头指针表<br>2. 移除头指针表中不满足最小值尺度的元素项<br>3. 第二次遍历数据集，创建FP树。对每个数据集中的项集：<br>&nbsp;&nbsp;&nbsp; 3.1 初始化空FP树<br>&nbsp;&nbsp;&nbsp; 3.2 对每个项集进行过滤和重排序<br>&nbsp;&nbsp;&nbsp; 3.3 使用这个项集更新FP树，从FP树的根节点开始：<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.3.1 如果当前项集的第一个元素项存在于FP树当前节点的子节点中，则更新这个子节点的计数值<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.3.2 否则，创建新的子节点，更新头指针表<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.3.3 对当前项集的其余元素项和当前元素项的对应子节点递归3.3的过程</p>









</blockquote>
<p>代码（在fpGrowth.py中加入下面的代码）：</p>
<p>1 总函数：createTree</p>
<div><div id="highlighter_424575" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">createTree(dataSet, minSup</code><code class="py keyword">=</code><code class="py value">1</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments">''' 创建FP树 '''</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 第一次遍历数据集，创建头指针表</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">headerTable </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">trans </code><code class="py keyword">in</code> <code class="py plain">dataSet:</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">trans:</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">headerTable[item] </code><code class="py keyword">=</code> <code class="py plain">headerTable.get(item, </code><code class="py value">0</code><code class="py plain">) </code><code class="py keyword">+</code> <code class="py plain">dataSet[trans]</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 移除不满足最小支持度的元素项</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">k </code><code class="py keyword">in</code> <code class="py plain">headerTable.keys():</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">headerTable[k] &lt; minSup:</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">del</code><code class="py plain">(headerTable[k])</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 空元素集，返回空</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">freqItemSet </code><code class="py keyword">=</code> <code class="py functions">set</code><code class="py plain">(headerTable.keys())</code></div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py functions">len</code><code class="py plain">(freqItemSet) </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py value">0</code><code class="py plain">:</code></div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py color1">None</code><code class="py plain">, </code><code class="py color1">None</code></div><div class="line number16 index15 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 增加一个数据项，用于存放指向相似元素项指针</code></div><div class="line number17 index16 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">k </code><code class="py keyword">in</code> <code class="py plain">headerTable:</code></div><div class="line number18 index17 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">headerTable[k] </code><code class="py keyword">=</code> <code class="py plain">[headerTable[k], </code><code class="py color1">None</code><code class="py plain">]</code></div><div class="line number19 index18 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retTree </code><code class="py keyword">=</code> <code class="py plain">treeNode(</code><code class="py string">'Null Set'</code><code class="py plain">, </code><code class="py value">1</code><code class="py plain">, </code><code class="py color1">None</code><code class="py plain">) </code><code class="py comments"># 根节点</code></div><div class="line number20 index19 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 第二次遍历数据集，创建FP树</code></div><div class="line number21 index20 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">tranSet, count </code><code class="py keyword">in</code> <code class="py plain">dataSet.items():</code></div><div class="line number22 index21 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">localD </code><code class="py keyword">=</code> <code class="py plain">{} </code><code class="py comments"># 对一个项集tranSet，记录其中每个元素项的全局频率，用于排序</code></div><div class="line number23 index22 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">tranSet:</code></div><div class="line number24 index23 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">item </code><code class="py keyword">in</code> <code class="py plain">freqItemSet:</code></div><div class="line number25 index24 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">localD[item] </code><code class="py keyword">=</code> <code class="py plain">headerTable[item][</code><code class="py value">0</code><code class="py plain">] </code><code class="py comments"># 注意这个[0]，因为之前加过一个数据项</code></div><div class="line number26 index25 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py functions">len</code><code class="py plain">(localD) &gt; </code><code class="py value">0</code><code class="py plain">:</code></div><div class="line number27 index26 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">orderedItems </code><code class="py keyword">=</code> <code class="py plain">[v[</code><code class="py value">0</code><code class="py plain">] </code><code class="py keyword">for</code> <code class="py plain">v </code><code class="py keyword">in</code> <code class="py functions">sorted</code><code class="py plain">(localD.items(), key</code><code class="py keyword">=</code><code class="py keyword">lambda</code> <code class="py plain">p: p[</code><code class="py value">1</code><code class="py plain">], reverse</code><code class="py keyword">=</code><code class="py color1">True</code><code class="py plain">)] </code><code class="py comments"># 排序</code></div><div class="line number28 index27 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">updateTree(orderedItems, retTree, headerTable, count) </code><code class="py comments"># 更新FP树</code></div><div class="line number29 index28 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">retTree, headerTable</code></div></div></td></tr></tbody></table></div></div>
<p>（代码比较宽，大家的显示器都那么大，应该没关系吧……）</p>
<p>需要注意的是，参数中的dataSet的格式比较奇特，不是直觉上得集合的list，而是一个集合的字典，以这个集合为键，值部分记录的是这个集合出现的次数。于是要生成这个dataSet还需要后面的createInitSet()函数辅助。因此代码中第7行中的<span style="font-family: &#39;Courier New&#39;;">dataSet[trans]</span>实际获得了这个trans集合的出现次数（在本例中均为1），同样第21行的“<span style="font-family: &#39;Courier New&#39;;">for tranSet, count in dataSet.items():</span>”获得了tranSet和count分别表示一个项集和该项集的出现次数。——这样做是为了适应后面在挖掘频繁项集时生成的条件FP树。</p>
<p>2 辅助函数：updateTree</p>
<div><div id="highlighter_913916" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">updateTree(items, inTree, headerTable, count):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">items[</code><code class="py value">0</code><code class="py plain">] </code><code class="py keyword">in</code> <code class="py plain">inTree.children:</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 有该元素项时计数值+1</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">inTree.children[items[</code><code class="py value">0</code><code class="py plain">]].inc(count)</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">else</code><code class="py plain">:</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 没有这个元素项时创建一个新节点</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">inTree.children[items[</code><code class="py value">0</code><code class="py plain">]] </code><code class="py keyword">=</code> <code class="py plain">treeNode(items[</code><code class="py value">0</code><code class="py plain">], count, inTree)</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 更新头指针表或前一个相似元素项节点的指针指向新节点</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">headerTable[items[</code><code class="py value">0</code><code class="py plain">]][</code><code class="py value">1</code><code class="py plain">] </code><code class="py keyword">=</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">headerTable[items[</code><code class="py value">0</code><code class="py plain">]][</code><code class="py value">1</code><code class="py plain">] </code><code class="py keyword">=</code> <code class="py plain">inTree.children[items[</code><code class="py value">0</code><code class="py plain">]]</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">else</code><code class="py plain">:</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">updateHeader(headerTable[items[</code><code class="py value">0</code><code class="py plain">]][</code><code class="py value">1</code><code class="py plain">], inTree.children[items[</code><code class="py value">0</code><code class="py plain">]])</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py functions">len</code><code class="py plain">(items) &gt; </code><code class="py value">1</code><code class="py plain">:</code></div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 对剩下的元素项迭代调用updateTree函数</code></div><div class="line number16 index15 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">updateTree(items[</code><code class="py value">1</code><code class="py plain">::], inTree.children[items[</code><code class="py value">0</code><code class="py plain">]], headerTable, count)</code></div></div></td></tr></tbody></table></div></div>
<p>3 辅助函数：updateHeader</p>
<div><div id="highlighter_894743" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">updateHeader(nodeToTest, targetNode):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">while</code> <code class="py plain">(nodeToTest.nodeLink !</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">):</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">nodeToTest </code><code class="py keyword">=</code> <code class="py plain">nodeToTest.nodeLink</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">nodeToTest.nodeLink </code><code class="py keyword">=</code> <code class="py plain">targetNode</code></div></div></td></tr></tbody></table></div></div>
<p>这个函数其实只做了一件事，就是获取头指针表中该元素项对应的单链表的尾节点，然后将其指向新节点targetNode。</p>
<p>&nbsp;</p>
<p><strong>生成数据集</strong></p>
<div><div id="highlighter_175430" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">loadSimpDat():</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">simpDat </code><code class="py keyword">=</code> <code class="py plain">[[</code><code class="py string">'r'</code><code class="py plain">, </code><code class="py string">'z'</code><code class="py plain">, </code><code class="py string">'h'</code><code class="py plain">, </code><code class="py string">'j'</code><code class="py plain">, </code><code class="py string">'p'</code><code class="py plain">],</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">[</code><code class="py string">'z'</code><code class="py plain">, </code><code class="py string">'y'</code><code class="py plain">, </code><code class="py string">'x'</code><code class="py plain">, </code><code class="py string">'w'</code><code class="py plain">, </code><code class="py string">'v'</code><code class="py plain">, </code><code class="py string">'u'</code><code class="py plain">, </code><code class="py string">'t'</code><code class="py plain">, </code><code class="py string">'s'</code><code class="py plain">],</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">[</code><code class="py string">'z'</code><code class="py plain">],</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">[</code><code class="py string">'r'</code><code class="py plain">, </code><code class="py string">'x'</code><code class="py plain">, </code><code class="py string">'n'</code><code class="py plain">, </code><code class="py string">'o'</code><code class="py plain">, </code><code class="py string">'s'</code><code class="py plain">],</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">[</code><code class="py string">'y'</code><code class="py plain">, </code><code class="py string">'r'</code><code class="py plain">, </code><code class="py string">'x'</code><code class="py plain">, </code><code class="py string">'z'</code><code class="py plain">, </code><code class="py string">'q'</code><code class="py plain">, </code><code class="py string">'t'</code><code class="py plain">, </code><code class="py string">'p'</code><code class="py plain">],</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">[</code><code class="py string">'y'</code><code class="py plain">, </code><code class="py string">'z'</code><code class="py plain">, </code><code class="py string">'x'</code><code class="py plain">, </code><code class="py string">'e'</code><code class="py plain">, </code><code class="py string">'q'</code><code class="py plain">, </code><code class="py string">'s'</code><code class="py plain">, </code><code class="py string">'t'</code><code class="py plain">, </code><code class="py string">'m'</code><code class="py plain">]]</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">simpDat</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="py keyword">def</code> <code class="py plain">createInitSet(dataSet):</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retDict </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">trans </code><code class="py keyword">in</code> <code class="py plain">dataSet:</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">retDict[</code><code class="py functions">frozenset</code><code class="py plain">(trans)] </code><code class="py keyword">=</code> <code class="py value">1</code></div><div class="line number14 index13 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">retDict</code></div></div></td></tr></tbody></table></div></div>
<p>生成的样例数据同文中用得一样。这个诡异的输入格式就是createInitSet()函数中这样来得。</p>
<p>&nbsp;</p>
<p><strong>测试代码</strong></p>
<div><div id="highlighter_145599" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">fpGrowth</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; simpDat </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.loadSimpDat()</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; initSet </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.createInitSet(simpDat)</code></div><div class="line number4 index3 alt1"><code class="py plain">&gt;&gt;&gt; myFPtree, myHeaderTab </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.createTree(initSet, </code><code class="py value">3</code><code class="py plain">)</code></div><div class="line number5 index4 alt2"><code class="py plain">&gt;&gt;&gt; myFPtree.disp()</code></div></div></td></tr></tbody></table></div></div>
<p>结果是这样的（连字都懒得打了，直接截图……）：</p>
<p><a href="http://images0.cnblogs.com/blog/327901/201506/161802259515925.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="image" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/161802263413638.png" alt="image" width="180" height="260" border="0"></a></p>
<p>得到的FP树也和图5中的一样。</p>
<h2>4.3 从一棵FP树种挖掘频繁项集</h2>
<p>到现在为止大部分比较困难的工作已经处理完了。有了FP树之后，就可以抽取频繁项集了。这里的思路与Apriori算法大致类似，首先从单元素项集合开始，然后在此基础上逐步构建更大的集合。</p>
<p>从FP树中抽取频繁项集的三个基本步骤如下：</p>
<ol>
<li>从FP树中获得条件模式基；</li>
<li>利用条件模式基，构建一个条件FP树；</li>
<li>迭代重复步骤1步骤2，直到树包含一个元素项为止。</li>
</ol>
<h3>1 抽取条件模式基</h3>
<p>（这个翻译是什么鬼……英文是conditional pattern base）</p>
<p>首先从头指针表中的每个频繁元素项开始，对每个元素项，获得其对应的条件模式基（conditional pattern base）。<strong>条件模式基</strong>是以所查找元素项为结尾的路径集合。每一条路径其实都是一条<strong>前缀路径（prefix path）</strong>。简而言之，<strong>一条前缀路径是介于所查找元素项与树根节点之间的所有内容。</strong></p>
<p>将图5重新贴在这里：</p>
<p><a href="http://images0.cnblogs.com/blog/327901/201506/161819232631796.png"><img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" title="image" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/161819240139166.png" alt="image" width="179" height="240" border="0"></a></p>
<p>则每一个频繁元素项的所有前缀路径（条件模式基）为：</p>
<table style="width: 400px;" border="1" cellspacing="0" cellpadding="2">
<tbody>
<tr>
<td valign="top" width="74">频繁项</td>
<td valign="top" width="326">前缀路径</td>
</tr>
<tr>
<td valign="top" width="74">z</td>
<td valign="top" width="326">{}: 5</td>
</tr>
<tr>
<td valign="top" width="74">r</td>
<td valign="top" width="326">{x, s}: 1, {z, x, y}: 1, {z}: 1</td>
</tr>
<tr>
<td valign="top" width="74">x</td>
<td valign="top" width="326">{z}: 3, {}: 1</td>
</tr>
<tr>
<td valign="top" width="74">y</td>
<td valign="top" width="326">{z, x}: 3</td>
</tr>
<tr>
<td valign="top" width="74">s</td>
<td valign="top" width="326">{z, x, y}: 2, {x}: 1</td>
</tr>
<tr>
<td valign="top" width="74">t</td>
<td valign="top" width="326">{z, x, y, s}: 2, {z, x, y, r}: 1</td>
</tr>
</tbody>
</table>
<p>发现规律了吗，z存在于路径{z}中，因此前缀路径为空，另添加一项该路径中z节点的计数值5构成其条件模式基；r存在于路径{r, z}、{r, y, x, z}、{r, s, x}中，分别获得前缀路径{z}、{y, x, z}、{s, x}，另添加对应路径中r节点的计数值（均为1）构成r的条件模式基；以此类推。</p>
<p>前缀路径将在下一步中用于构建条件FP树，暂时先不考虑。如何发现某个频繁元素项的所在的路径？利用先前创建的头指针表和FP树中的相似元素节点指针，我们已经有了每个元素对应的单链表，因而可以直接获取。</p>
<p>下面的程序给出了创建前缀路径的代码：</p>
<p>1 主函数：findPrefixPath</p>
<div><div id="highlighter_311552" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">findPrefixPath(basePat, treeNode):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments">''' 创建前缀路径 '''</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">condPats </code><code class="py keyword">=</code> <code class="py plain">{}</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">while</code> <code class="py plain">treeNode !</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">prefixPath </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">ascendTree(treeNode, prefixPath)</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py functions">len</code><code class="py plain">(prefixPath) &gt; </code><code class="py value">1</code><code class="py plain">:</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">condPats[</code><code class="py functions">frozenset</code><code class="py plain">(prefixPath[</code><code class="py value">1</code><code class="py plain">:])] </code><code class="py keyword">=</code> <code class="py plain">treeNode.count</code></div><div class="line number9 index8 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">treeNode </code><code class="py keyword">=</code> <code class="py plain">treeNode.nodeLink</code></div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">condPats</code></div></div></td></tr></tbody></table></div></div>
<p>该函数代码用于为给定元素项生成一个条件模式基（前缀路径），这通过访问树中所有包含给定元素项的节点来完成。参数basePet表示输入的频繁项，treeNode为当前FP树种对应的第一个节点（可在函数外部通过headerTable[basePat][1]获取）。函数返回值即为条件模式基condPats，用一个字典表示，键为前缀路径，值为计数值。</p>
<p>2 辅助函数：ascendTree</p>
<div><div id="highlighter_492704" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">ascendTree(leafNode, prefixPath):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">leafNode.parent !</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">prefixPath.append(leafNode.name)</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">ascendTree(leafNode.parent, prefixPath)</code></div></div></td></tr></tbody></table></div></div>
<p>这个函数直接修改prefixPath的值，将当前节点leafNode添加到prefixPath的末尾，然后递归添加其父节点。最终结果，prefixPath就是一条从treeNode（包括treeNode）到根节点（不包括根节点）的路径。在主函数findPrefixPath()中再取prefixPath[1:]，即为treeNode的前缀路径。</p>
<p>测试代码：</p>
<div><div id="highlighter_532916" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; fpGrowth.findPrefixPath(</code><code class="py string">'x'</code><code class="py plain">, myHeaderTab[</code><code class="py string">'x'</code><code class="py plain">][</code><code class="py value">1</code><code class="py plain">])</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; fpGrowth.findPrefixPath(</code><code class="py string">'z'</code><code class="py plain">, myHeaderTab[</code><code class="py string">'z'</code><code class="py plain">][</code><code class="py value">1</code><code class="py plain">])</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; fpGrowth.findPrefixPath(</code><code class="py string">'r'</code><code class="py plain">, myHeaderTab[</code><code class="py string">'r'</code><code class="py plain">][</code><code class="py value">1</code><code class="py plain">])</code></div></div></td></tr></tbody></table></div></div>
<h3>2 创建条件FP树</h3>
<p>对于每一个频繁项，都要创建一棵条件FP树。可以使用刚才发现的条件模式基作为输入数据，并通过相同的建树代码来构建这些树。例如，对于r，即以“{x, s}: 1, {z, x, y}: 1, {z}: 1”为输入，调用函数createTree()获得r的条件FP树；对于t，输入是对应的条件模式基“{z, x, y, s}: 2, {z, x, y, r}: 1”。</p>
<p>代码（直接调用createTree()函数）：</p>
<div><div id="highlighter_573210" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">condPattBases </code><code class="py keyword">=</code> <code class="py plain">findPrefixPath(basePat, headerTable[basePat][</code><code class="py value">1</code><code class="py plain">])</code></div><div class="line number2 index1 alt1"><code class="py plain">myCondTree, myHead </code><code class="py keyword">=</code> <code class="py plain">createTree(condPattBases, minSup)</code></div></div></td></tr></tbody></table></div></div>
<p>示例：t的条件FP树</p>
<p align="center"><a href="http://images0.cnblogs.com/blog/327901/201506/161929079668811.png"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="image" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/161929098102983.png" alt="image" width="640" height="406" border="0"></a></p>
<p align="center">图8 t的条件FP树的创建过程</p>
<p>在图8中，注意到元素项s以及r是条件模式基的一部分，但是它们并不属于条件FP树。因为在当前的输入中，s和r不满足最小支持度的条件。</p>
<h3>3 递归查找频繁项集</h3>
<p>有了FP树和条件FP树，我们就可以在前两步的基础上递归得查找频繁项集。</p>
<p>递归的过程是这样的：</p>
<blockquote>
<p>输入：我们有当前数据集的FP树（inTree，headerTable）<br>1. 初始化一个空列表preFix表示前缀<br>2. 初始化一个空列表freqItemList接收生成的频繁项集（作为输出）<br>3. 对headerTable中的每个元素basePat（按计数值由小到大），递归：<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.1 记basePat + preFix为当前频繁项集newFreqSet<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2 将newFreqSet添加到freqItemList中<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.3 计算t的条件FP树（myCondTree、myHead）<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.4 当条件FP树不为空时，继续下一步；否则退出递归<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.4 以myCondTree、myHead为新的输入，以newFreqSet为新的preFix，外加freqItemList，递归这个过程</p>









</blockquote>
<p>函数如下：</p>
<div><div id="highlighter_622211" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">mineTree(inTree, headerTable, minSup, preFix, freqItemList):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">bigL </code><code class="py keyword">=</code> <code class="py plain">[v[</code><code class="py value">0</code><code class="py plain">] </code><code class="py keyword">for</code> <code class="py plain">v </code><code class="py keyword">in</code> <code class="py functions">sorted</code><code class="py plain">(headerTable.items(), key</code><code class="py keyword">=</code><code class="py keyword">lambda</code> <code class="py plain">p: p[</code><code class="py value">1</code><code class="py plain">])]</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">for</code> <code class="py plain">basePat </code><code class="py keyword">in</code> <code class="py plain">bigL:</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">newFreqSet </code><code class="py keyword">=</code> <code class="py plain">preFix.copy()</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">newFreqSet.add(basePat)</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">freqItemList.append(newFreqSet)</code></div><div class="line number7 index6 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">condPattBases </code><code class="py keyword">=</code> <code class="py plain">findPrefixPath(basePat, headerTable[basePat][</code><code class="py value">1</code><code class="py plain">])</code></div><div class="line number8 index7 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">myCondTree, myHead </code><code class="py keyword">=</code> <code class="py plain">createTree(condPattBases, minSup)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">if</code> <code class="py plain">myHead !</code><code class="py keyword">=</code> <code class="py color1">None</code><code class="py plain">:</code></div><div class="line number11 index10 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py comments"># 用于测试</code></div><div class="line number12 index11 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py functions">print</code> <code class="py string">'conditional tree for:'</code><code class="py plain">, newFreqSet</code></div><div class="line number13 index12 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">myCondTree.disp()</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">mineTree(myCondTree, myHead, minSup, newFreqSet, freqItemList)</code></div></div></td></tr></tbody></table></div></div>
<p>输入参数：</p>
<ul>
<li>inTree和headerTable是由createTree()函数生成的数据集的FP树</li>
<li>minSup表示最小支持度</li>
<li>preFix请传入一个空集合（set([])），将在函数中用于保存当前前缀</li>
<li>freqItemList请传入一个空列表（[]），将用来储存生成的频繁项集</li>
</ul>
<p>测试代码：</p>
<div><div id="highlighter_770400" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; freqItems </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; fpGrowth.mineTree(myFPtree, myHeaderTab, </code><code class="py value">3</code><code class="py plain">, </code><code class="py functions">set</code><code class="py plain">([]), freqItems)</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; freqItems</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<p>[set(['y']), set(['y', 'x']), set(['y', 'z']), set(['y', 'x', 'z']), set(['s']), set(['x', 's']), set(['t']), set(['z', 't']), set(['x', 'z', 't']), set(['y', 'x', 'z', 't']), set(['y', 'z', 't']), set(['x', 't']), set(['y', 'x', 't']), set(['y', 't']), set(['r']), set(['x']), set(['x', 'z']), set(['z'])]</p>
</blockquote>
<p>想这一段代码解释清楚比较难，因为中间涉及到很多递归。直接举例说明，我们在这里分解输入myFPtree和myHeaderTab后，“<span style="font-family: &#39;Courier New&#39;;">for basePat in bigL:</span>”一行当basePat为<strong>’t’</strong>时的过程：</p>
<p><a href="http://images0.cnblogs.com/blog/327901/201506/162133358572530.png"><img style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border: 0px;" title="image" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/162133365768144.png" alt="image" width="640" height="165" border="0"></a></p>
<p align="center">图9 mineTree函数解构图（basePat = ‘t’）</p>
<p>图中红色加粗的部分即实际添加到freqItemList中的频繁项集。</p>
<h3>4 封装</h3>
<p>至此，完整的FP-growth算法已经可以运行。封装整个过程如下：</p>
<div><div id="highlighter_183268" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py keyword">def</code> <code class="py plain">fpGrowth(dataSet, minSup</code><code class="py keyword">=</code><code class="py value">3</code><code class="py plain">):</code></div><div class="line number2 index1 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">initSet </code><code class="py keyword">=</code> <code class="py plain">createInitSet(dataSet)</code></div><div class="line number3 index2 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">myFPtree, myHeaderTab </code><code class="py keyword">=</code> <code class="py plain">createTree(initSet, minSup)</code></div><div class="line number4 index3 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">freqItems </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number5 index4 alt2"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py plain">mineTree(myFPtree, myHeaderTab, minSup, </code><code class="py functions">set</code><code class="py plain">([]), freqItems)</code></div><div class="line number6 index5 alt1"><code class="py spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="py keyword">return</code> <code class="py plain">freqItems</code></div></div></td></tr></tbody></table></div></div>
<p>注意，这里直接使用了上节（4.2）中的createInitSet()函数，这里有个问题：上节中的loadSimpDat()函数返回了一组简单的样例数据，没有相同的事务，所以createInitSet()函数中直接赋值“retDict[frozenset(trans)] = 1”没有问题。但是如果要封装成一个通用的FP-growth算法，就还需要处理输入数据有相同事务的情形，createInitSet()函数中需要累加retDict[frozenset(trans)]。（谢谢@xanxuslam的回复）</p>
<p>测试代码：</p>
<div><div id="highlighter_434330" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">fpGrowth</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; dataSet </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.loadSimpDat()</code></div><div class="line number3 index2 alt2"><code class="py plain">&gt;&gt;&gt; freqItems </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.fpGrowth(dataSet)</code></div><div class="line number4 index3 alt1"><code class="py plain">&gt;&gt;&gt; freqItems</code></div></div></td></tr></tbody></table></div></div>
<p>和之前的输出相同。</p>
<h3>5 总结</h3>
<p>FP-growth算法是一种用于发现数据集中频繁模式的有效方法。FP-growth算法利用Apriori原则，执行更快。Apriori算法产生候选项集，然后扫描数据集来检查它们是否频繁。由于只对数据集扫描两次，因此FP-growth算法执行更快。在FP-growth算法中，数据集存储在一个称为FP树的结构中。FP树构建完成后，可以通过查找元素项的条件基及构建条件FP树来发现频繁项集。该过程不断以更多元素作为条件重复进行，直到FP树只包含一个元素为止。</p>
<p>FP-growth算法还有一个map-reduce版本的实现，它也很不错，可以扩展到多台机器上运行。Google使用该算法通过遍历大量文本来发现频繁共现词，其做法和我们刚才介绍的例子非常类似（参见扩展阅读：FP-growth算法）。</p>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label4"></a></div><h1>5. 示例：从新闻网站点击流中挖掘新闻报道</h1>
<p>书中的这两章有不少精彩的示例，这里只选取比较有代表性的一个——从新闻网站点击流中挖掘热门新闻报道。这是一个很大的数据集，有将近100万条记录（参见扩展阅读：kosarak）。在源数据集合保存在文件kosarak.dat中。该文件中的每一行包含某个用户浏览过的新闻报道。新闻报道被编码成整数，我们可以使用Apriori或FP-growth算法挖掘其中的频繁项集，查看那些新闻ID被用户大量观看到。</p>
<p>首先，将数据集导入到列表：</p>
<div><div id="highlighter_870981" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; parsedDat </code><code class="py keyword">=</code> <code class="py plain">[line.split() </code><code class="py keyword">for</code> <code class="py plain">line </code><code class="py keyword">in</code> <code class="py functions">open</code><code class="py plain">(</code><code class="py string">'kosarak.dat'</code><code class="py plain">).readlines()]</code></div></div></td></tr></tbody></table></div></div>
<p>接下来需要对初始集合格式化：</p>
<div><div id="highlighter_356762" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py keyword">import</code> <code class="py plain">fpGrowth</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; initSet </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.createInitSet(parsedDat)</code></div></div></td></tr></tbody></table></div></div>
<p>然后构建FP树，并从中寻找那些至少被10万人浏览过的新闻报道。</p>
<div><div id="highlighter_871067" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; myFPtree, myHeaderTab </code><code class="py keyword">=</code> <code class="py plain">fpGrowth.createTree(initSet, </code><code class="py value">100000</code><code class="py plain">)</code></div></div></td></tr></tbody></table></div></div>
<p>下面创建一个空列表来保存这些频繁项集：</p>
<div><div id="highlighter_754525" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; myFreqList </code><code class="py keyword">=</code> <code class="py plain">[]</code></div><div class="line number2 index1 alt1"><code class="py plain">&gt;&gt;&gt; fpGrowth.mineTree(myFPtree, myHeaderTab, </code><code class="py value">100000</code><code class="py plain">, </code><code class="py functions">set</code><code class="py plain">([]), myFreqList)</code></div></div></td></tr></tbody></table></div></div>
<p>接下来看下有多少新闻报道或报道集合曾经被10万或者更多的人浏览过：</p>
<div><div id="highlighter_132139" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; </code><code class="py functions">len</code><code class="py plain">(myFreqList)</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<p>9</p>
</blockquote>
<p>总共有9个。下面看看都是那些：</p>
<div><div id="highlighter_413134" class="syntaxhighlighter  py"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="py plain">&gt;&gt;&gt; myFreqList</code></div></div></td></tr></tbody></table></div></div>
<blockquote>
<p>[set(['1']), set(['1', '6']), set(['3']), set(['11', '3']), set(['11', '3', '6']), set(['3', '6']), set(['11']), set(['11', '6']), set(['6'])]</p>
</blockquote>
<div style="text-align: right"><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#_labelTop">回到顶部</a><a name="_label5"></a></div><h1>扩展阅读</h1>
<p>在看这两章的过程中和之后又看到的一些相关的东西：</p>
<ul>
<li>尿布与啤酒：<a title="http://web.onetel.net.uk/~hibou/Beer%20and%20Nappies.html" href="http://web.onetel.net.uk/~hibou/Beer%20and%20Nappies.html" target="_blank">http://web.onetel.net.uk/~hibou/Beer and Nappies.html</a></li>
<li><a href="http://www-users.cs.umn.edu/~kumar/dmbook/ch6.pdf" target="_blank">Association Analysis: Basic Concepts and Algorithms[PDF]</a></li>
<li>FP-growth算法：H. Li, Y. Wang, D. Zhang, M. Zhang, and E. Chang, “PFP: Parallel FP-Growth for Query Recommendation,” RecSys 2008, Proceedings of the 2008 ACM Conference on Recommender Systems; <a href="http://portal.acm.org/citation.cfm?id=1454027" target="_blank">http://portal.acm.org/citation.cfm?id=1454027</a>.</li>
<li>kosarak：Hungarian online news portal clickstream retrieved July 11, 2011; from Frequent Itemset Mining Dataset Repository, <a href="http://fimi.ua.ac.be/data/">http://fimi.ua.ac.be/data/</a>, donated by Ferenc Bodon.</li>
</ul>
<p>注：</p>
<ul>
<li>获取kosarak.dat文件，请访问作者的GitHub项目：<a href="https://github.com/pbharrin/machinelearninginaction" target="_blank">https://github.com/pbharrin/machinelearninginaction</a></li>
<li>如果需要在Python源代码中插入Unicode字符（汉字）注释最好在文件第一行添加“# coding=utf-8”。</li>
</ul>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="EntryTag">
    标签: 
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98/">机器学习实战</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/Python/">Python</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/">无监督学习</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/">关联分析</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E5%AD%A6%E4%B9%A0/">关联规则学习</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/Apriori%20%E7%AE%97%E6%B3%95/">Apriori 算法</a>,             <a href="https://www.cnblogs.com/qwertWZ/tag/FP-growth%20%E7%AE%97%E6%B3%95/">FP-growth 算法</a></div>

    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(4510857,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
        <a id="green_channel_follow" onclick="follow(&#39;c40c8168-36d2-e011-8ee0-842b2b196315&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/qwertWZ/" target="_blank"><img src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/20150616232950.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/qwertWZ/">qwertWZ</a><br>
            <a href="https://home.cnblogs.com/u/qwertWZ/followees/">关注 - 18</a><br>
            <a href="https://home.cnblogs.com/u/qwertWZ/followers/">粉丝 - 61</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;c40c8168-36d2-e011-8ee0-842b2b196315&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(4510857,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">5</span>
    </div>
    <div class="buryit" onclick="votePost(4510857,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script></div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/qwertWZ/p/4447141.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/qwertWZ/p/4447141.html" title="发布于 2015-04-22 12:57">An ffmpeg and SDL Tutorial</a>
    <br>
    <a href="https://www.cnblogs.com/qwertWZ/p/4510859.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/qwertWZ/p/4510859.html" title="发布于 2015-05-17 23:26">《机器学习实战》学习笔记</a>

</div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2015-05-17 23:25</span>&nbsp;<a href="https://www.cnblogs.com/qwertWZ/">qwertWZ</a> 阅读(<span id="post_view_count">71819</span>) 评论(<span id="post_comment_count">8</span>) <a href="https://i.cnblogs.com/EditPosts.aspx?postid=4510857" rel="nofollow"> 编辑</a> <a href="javascript:void(0)" onclick="AddToWz(4510857); return false;">收藏</a>
</div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 121831, cb_blogApp = 'qwertWZ', cb_blogUserGuid = 'c40c8168-36d2-e011-8ee0-842b2b196315';
    var cb_entryId = 4510857, cb_entryCreatedDate = '2015-05-17 23:25', cb_postType = 1; 
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder">

<div id="comment_pager_top">
    
</div>

<br>
<div class="feedback_area_title">评论列表</div>
<div class="feedbackNoItems"><div class="feedbackNoItems"></div></div>	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#3225651" class="layer">#1楼</a>
<a name="3225651" id="comment_anchor_3225651"></a>

 
<span class="comment_date">2015-07-10 20:26</span>

 

            <a id="a_comment_author_3225651" href="https://home.cnblogs.com/u/673587/" target="_blank">Mr.Quan</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_3225651" class="blog_comment_body">
    请问，Apriori算法可以用于空气质量预测吗
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3225651, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(3225651, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#3596420" class="layer">#2楼</a>
<a name="3596420" id="comment_anchor_3596420"></a>

 
<span class="comment_date">2017-01-04 20:52</span>

 

            <a id="a_comment_author_3596420" href="https://home.cnblogs.com/u/1091017/" target="_blank">xanxuslam</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_3596420" class="blog_comment_body">
    fp-growth中创建初始set时有问题吧，应该需要判断当前tran是否出现过，因为有可能会出现多个相同的tran，代码如下：<br>def createInitSet(dataSet):<br>    retDict = {}<br>    for trans in dataSet:<br>        if frozenset(trans) in retDict:<br>            retDict[frozenset(trans)] += 1<br>        else:<br>            retDict[frozenset(trans)] = 1<br>    return retDict
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3596420, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(3596420, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#3596860" class="layer">#3楼</a>
<a name="3596860" id="comment_anchor_3596860"></a>
[<span class="louzhu">楼主</span>]
 
<span class="comment_date">2017-01-05 13:31</span>

 

            <a id="a_comment_author_3596860" href="https://www.cnblogs.com/qwertWZ/" target="_blank">qwertWZ</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_3596860" class="blog_comment_body">
    <a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#3596420" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,3596420);">@</a>
xanxuslam<br>嗯，谢谢你的回复，我在原文中也写一下。<br>我理解的是，这里的createInitSet()只是为了适配上面的loadSimpDat()函数返回的样例数据，因为样例数据就那么几个也没重复的，所以没做重复检测处理。实际问题中肯定不会用到loadSimpDat()，也就不一定需要这个createInitSet()函数。真正用来创建fp树的是createTree，这个函数应该算是通用的，没什么问题吧。<br>附上这几行代码，省得再翻回去找了：<br>&gt;&gt;&gt; import fpGrowth<br>&gt;&gt;&gt; simpDat = fpGrowth.loadSimpDat()<br>&gt;&gt;&gt; initSet = fpGrowth.createInitSet(simpDat)<br>&gt;&gt;&gt; myFPtree, myHeaderTab = fpGrowth.createTree(initSet, 3)
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3596860, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(3596860, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        <span id="comment_3596860_avatar" style="display:none">
            https://pic.cnblogs.com/face/327901/20150616232950.png
        </span>

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#3877032" class="layer">#4楼</a>
<a name="3877032" id="comment_anchor_3877032"></a>

 
<span class="comment_date">2017-12-29 11:31</span>

 

            <a id="a_comment_author_3877032" href="https://home.cnblogs.com/u/1308771/" target="_blank">fszfly</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_3877032" class="blog_comment_body">
    orderedItems = [v[0] for v in sorted(localD.items(), key=lambda p: p[1], reverse=True)] 这行代码好像也不太严谨，因为我使用python3环境运行文章中的代码实例，多次运行之后发现运行的结果不一样。经过排查后，感觉如上代码应该改为 orderedItems = [v[0] for v in sorted(localD.items(), key=lambda kv: (-kv[1], kv[0]), reverse=False)]
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3877032, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(3877032, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#4005015" class="layer">#5楼</a>
<a name="4005015" id="comment_anchor_4005015"></a>

 
<span class="comment_date">2018-06-25 09:54</span>

 

            <a id="a_comment_author_4005015" href="https://home.cnblogs.com/u/1427135/" target="_blank">molly87qd</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_4005015" class="blog_comment_body">
    我不太理解的是rulesFromConseq()这个函数里的m值<br>m=len(H[0] 这个不是恒等于1吗<br>另外，if (len(freqSet) &gt; (m + 1)):这个条件的意义我也理解不了
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4005015, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(4005015, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#4035300" class="layer">#6楼</a>
<a name="4035300" id="comment_anchor_4035300"></a>

 
<span class="comment_date">2018-08-04 09:40</span>

 

            <a id="a_comment_author_4035300" href="https://www.cnblogs.com/LittleHann/" target="_blank">郑瀚Andrew.Hann</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_4035300" class="blog_comment_body">
    good post
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4035300, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(4035300, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        <span id="comment_4035300_avatar" style="display:none">
            https://pic.cnblogs.com/face/532548/20181018103113.png
        </span>

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#4260104" class="layer">#7楼</a>
<a name="4260104" id="comment_anchor_4260104"></a>

 
<span class="comment_date">2019-05-20 16:28</span>

 

            <a id="a_comment_author_4260104" href="https://home.cnblogs.com/u/1495051/" target="_blank">有期</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_4260104" class="blog_comment_body">
    <div class="cnblogs_Highlighter sh-gutter"><div><div id="highlighter_714805" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">numItems </code><code class="python keyword">=</code> <code class="python functions">float</code><code class="python plain">(</code><code class="python functions">len</code><code class="python plain">(D))</code></div></div></td></tr></tbody></table></div></div></div><br>TypeError: object of type 'map' has no len()<br>这句话报错呢
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4260104, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(4260104, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;

<span class="comment_actions">
    
    
    
    
</span>


				</div>
				
<a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#4401008" class="layer">#8楼</a>
<a name="4401008" id="comment_anchor_4401008"></a>

        <span id="comment-maxId" style="display:none">4401008</span>
        <span id="comment-maxDate" style="display:none">2019/10/23 上午10:51:10</span>
 
<span class="comment_date">2019-10-23 10:51</span>

 

            <a id="a_comment_author_4401008" href="https://home.cnblogs.com/u/1839446/" target="_blank">起风了_0</a>

			</div>
			<div class="feedbackCon">
				
<div id="comment_body_4401008" class="blog_comment_body">
    请问orderedItem = [v[0] for v in sorted(localD.items(), key=lambda p: (p[1], int(p[0])), reverse=True)]这句话报错改怎么改呢ValueError: invalid literal for int() with base 10: 'z'
</div>
        <div class="comment_vote">
            <span class="comment_error" style="color: red"></span>
            <a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4401008, &#39;Digg&#39;, this.parentElement, false);">
                支持(0)
            </a>
            <a href="javascript:void(0);" class="comment_burry" onclick="return voteComment(4401008, &#39;Bury&#39;, this.parentElement, false);">
                反对(0)
            </a>
        </div>
        

			</div>
		</div>

<div id="comment_pager_bottom">
    
</div>


</div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>

<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/qwertWZ/p/4510857.html#top">返回顶部</a></div>
    <div id="comment_form_container"><div class="login_tips">
    注册用户登录后才能发表评论，请 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a>
     或 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，
    <a href="https://www.cnblogs.com/">访问</a> 网站首页。
</div></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="https://ke.qq.com/huodong/mashibing_pc/index.html?from=800018451" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-马士兵&#39;)">【培训】马士兵老师强势回归！Java线下课程全免费，双十一大促！</a><br><a href="https://www.jdcloud.com/cn/activity/year-end?utm_source=DMT_cnblogs&amp;utm_medium=CH&amp;utm_campaign=q4vm&amp;utm_term=Virtual-Machines" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-京东云&#39;)">【活动】京东云服务器_云主机低于1折，低价高性能产品备战双11</a><br><a href="https://www.ctyun.cn/activity/20191111?hmsr=%E7%9C%8B%E7%9C%8B-%E5%8D%9A%E5%AE%A2%E5%9B%AD-%E5%8F%8C11-1106&amp;hmpl=&amp;hmcu=&amp;hmkw=&amp;hmci=" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-天翼云&#39;)">【推荐】天翼云双十一翼降到底，云主机11.11元起，抽奖送大礼</a><br><a href="https://cloud.tencent.com/act/double11/reserve?fromSource=gwzcw.3000742.3000742.3000742&amp;utm_medium=cpc&amp;utm_id=gwzcw.3000742.3000742.3000742" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-腾讯云&#39;)">【优惠】腾讯云 11.11智惠上云，爆款提前购与双11活动同价</a><br><a href="https://www.getui.com/2019devfest?f=5&amp;p=10&amp;c=15&amp;ch=1&amp;hmsr=%E5%8D%9A%E5%AE%A2%E5%9B%AD&amp;hmpl=2019%E5%BC%80%E5%8F%91%E8%80%85%E8%8A%82&amp;hmcu=PC&amp;hmkw=&amp;hmci=" target="_blank">【福利】个推四大热门移动开发SDK全部免费用一年，限时抢！</a><br><a href="https://www.qiniu.com/events/20191111?utm_campaign=2019_1111&amp;utm_content=cnblogs_1111&amp;utm_medium=banner&amp;utm_source=cnblogs&amp;utm_term=cnblogs_1111" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-七牛云&#39;)">【优惠】七牛云采购嘉年华，云存储、CDN等云产品低至1折</a><br></div>
    <div id="opt_under_post"></div>
    <script async="async" src="./使用Apriori算法和FP-growth算法进行关联分析 - qwertWZ - 博客园_files/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <script>
        googletag.cmd.push(function () {
            googletag.defineSlot("/1090369/C1", [300, 250], "div-gpt-ad-1546353474406-0").addService(googletag.pubads());
            googletag.defineSlot("/1090369/C2", [468, 60], "div-gpt-ad-1539008685004-0").addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;"></div>
    </div>
    <div id="under_post_news"><div class="recomm-block"><b>相关博文：</b><br>·  <a title="关联分析：FP-Growth算法" href="https://www.cnblogs.com/datahunter/p/3903413.html" target="_blank" onclick="clickRecomItmem(3903413)">关联分析：FP-Growth算法</a><br>·  <a title="机器学习（八）—Apriori算法" href="https://www.cnblogs.com/ybjourney/p/4847489.html" target="_blank" onclick="clickRecomItmem(4847489)">机器学习（八）—Apriori算法</a><br>·  <a title="机器学习（九）—FP-growth算法" href="https://www.cnblogs.com/ybjourney/p/4851540.html" target="_blank" onclick="clickRecomItmem(4851540)">机器学习（九）—FP-growth算法</a><br>·  <a title="使用Apriori进行关联分析（一）" href="https://www.cnblogs.com/bigmonkey/p/7405555.html" target="_blank" onclick="clickRecomItmem(7405555)">使用Apriori进行关联分析（一）</a><br>·  <a title="基于Python的机器学习实战：Apriori" href="https://www.cnblogs.com/90zeng/p/apriori.html" target="_blank" onclick="clickRecomItmem(5003438)">基于Python的机器学习实战：Apriori</a><br>»  <a target="_blank" href="https://recomm.cnblogs.com/blogpost/4510857">更多推荐...</a></div></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;">
            <script>
                if (new Date() >= new Date(2018, 9, 13)) {
                    googletag.cmd.push(function () { googletag.display("div-gpt-ad-1539008685004-0"); });
                }
            </script>
        </div>
    </div>
    <div id="under_post_kb">
<div class="itnews c_ad_block">
    <b>最新 IT 新闻</b>:
    <br>
 ·              <a href="https://news.cnblogs.com/n/647454/" target="_blank">神秘的塔利怪物变得更加神秘</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/647453/" target="_blank">小米CC9 Pro拆解：后置五摄成本是骁龙855数倍！</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/647452/" target="_blank">显微镜下的眼泪每滴都不一样？这一滴好像带着刺</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/647451/" target="_blank">网友质疑双11数据造假 天猫：造谣要负法律责任</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/647450/" target="_blank">汉堡王在欧洲上市素肉皇堡：联合利华供应植物蛋白人造肉</a>
            <br>
    » <a href="https://news.cnblogs.com/" title="IT 新闻" target="_blank">更多新闻...</a>
</div></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
        setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
        deliverAdT2();
        deliverAdC1();
        deliverAdC2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem"><!--done-->
<h3 class="catListTitle">公告</h3>

<div id="blog-news">
    
    <div id="profile_block">
        昵称：
        <a href="https://home.cnblogs.com/u/qwertWZ/">
            qwertWZ
        </a>
        <br>
        园龄：
        <a href="https://home.cnblogs.com/u/qwertWZ/" title="入园时间：2011-08-29">
            8年2个月
        </a>
        <br>
        粉丝：
        <a href="https://home.cnblogs.com/u/qwertWZ/followers/">
            61
        </a>
        <br>
        关注：
        <a href="https://home.cnblogs.com/u/qwertWZ/followees/">
            18
        </a>
        <div id="p_b_follow">
<a href="javascript:void(0)" onclick="follow(&#39;c40c8168-36d2-e011-8ee0-842b2b196315&#39;)">+加关注</a></div>
        <script>getFollowStatus('c40c8168-36d2-e011-8ee0-842b2b196315');</script>
    </div>
</div>

</div>

			<div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/10/12&#39;); return false;">&lt;</a>
                            </td>
                            <td align="center">2019年11月</td>
                            <td align="right" class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/12/12&#39;); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
                    <th class="CalDayHeader" align="center" abbr="日" scope="col">日</th>
                    <th class="CalDayHeader" align="center" abbr="一" scope="col">一</th>
                    <th class="CalDayHeader" align="center" abbr="二" scope="col">二</th>
                    <th class="CalDayHeader" align="center" abbr="三" scope="col">三</th>
                    <th class="CalDayHeader" align="center" abbr="四" scope="col">四</th>
                    <th class="CalDayHeader" align="center" abbr="五" scope="col">五</th>
                    <th class="CalDayHeader" align="center" abbr="六" scope="col">六</th>
        </tr>
            <tr>
                            <td class="CalOtherMonthDay" align="center">27</td>
                            <td class="CalOtherMonthDay" align="center">28</td>
                            <td class="CalOtherMonthDay" align="center">29</td>
                            <td class="CalOtherMonthDay" align="center">30</td>
                            <td class="CalOtherMonthDay" align="center">31</td>
                        <td class="" align="center">
                            1
                        </td>
                    <td class="CalWeekendDay" align="center">
                        2
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            3
                        </td>
                            <td class="" align="center">
                                4
                            </td>
                            <td class="" align="center">
                                5
                            </td>
                            <td class="" align="center">
                                6
                            </td>
                            <td class="" align="center">
                                7
                            </td>
                            <td class="" align="center">
                                8
                            </td>
                        <td class="CalWeekendDay" align="center">
                            9
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            10
                        </td>
                            <td class="" align="center">
                                11
                            </td>
                            <td class="CalTodayDay" align="center">
                                12
                            </td>
                            <td class="" align="center">
                                13
                            </td>
                            <td class="" align="center">
                                14
                            </td>
                            <td class="" align="center">
                                15
                            </td>
                        <td class="CalWeekendDay" align="center">
                            16
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            17
                        </td>
                            <td class="" align="center">
                                18
                            </td>
                            <td class="" align="center">
                                19
                            </td>
                            <td class="" align="center">
                                20
                            </td>
                            <td class="" align="center">
                                21
                            </td>
                            <td class="" align="center">
                                22
                            </td>
                        <td class="CalWeekendDay" align="center">
                            23
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            24
                        </td>
                            <td class="" align="center">
                                25
                            </td>
                            <td class="" align="center">
                                26
                            </td>
                            <td class="" align="center">
                                27
                            </td>
                            <td class="" align="center">
                                28
                            </td>
                            <td class="" align="center">
                                29
                            </td>
                        <td class="CalWeekendDay" align="center">
                            30
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            1
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                2
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                3
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                4
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                5
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                6
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            7
                        </td>
                </tr>
    </tbody>
</table></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn">
<!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    <div id="sidebar_search" class="mySearch">
        <h3 class="catListTitle">搜索</h3>
        <div id="sidebar_search_box">
            <div id="widget_my_zzk" class="div_my_zzk">
                <input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk">
            </div>
            <div id="widget_my_google" class="div_my_zzk">
                <input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk">
            </div>
        </div>
    </div>
</div>

<!-- 常用链接 -->
<div id="sidebar_shortcut" class="sidebar-block">
    <div class="catListLink">
<h3 class="catListTitle">
常用链接
</h3>
<ul>
		<li>

<a href="https://www.cnblogs.com/qwertWZ/p/" title="我的博客的随笔列表">我的随笔</a>
</li>
		<li>

<a href="https://www.cnblogs.com/qwertWZ/MyComments.html" title="我的发表过的评论列表">我的评论</a>
</li>
		<li>

<a href="https://www.cnblogs.com/qwertWZ/OtherPosts.html" title="我评论过的随笔列表">我的参与</a>
</li>
		<li>

<a href="https://www.cnblogs.com/qwertWZ/RecentComments.html" title="我的博客的评论列表">最新评论</a>
</li>
		<li>

<a href="https://www.cnblogs.com/qwertWZ/tag/" title="我的博客的标签列表">我的标签</a>
</li>

</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div>


</div>

<!-- 最新随笔 -->



<!-- 我的标签 -->
<div id="sidebar_toptags" class="sidebar-block">
    <div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>

        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E8%BD%AC%E8%BD%BD/">转载</a>(13)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a>(6)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/Python/">Python</a>(5)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/SQL%20Server%202005%20%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8/">SQL Server 2005 编程入门经典</a>(5)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>(5)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98/">机器学习实战</a>(5)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E5%A4%87%E5%BF%98/">备忘</a>(4)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/">操作指南</a>(4)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/Git/">Git</a>(4)
        </li>
        <li>
            <a href="https://www.cnblogs.com/qwertWZ/tag/Makefile/">Makefile</a>(2)
        </li>
            <li>
                <a href="https://www.cnblogs.com/qwertWZ/tag/">更多</a>
            </li>

</ul>
</div>


</div>

<!-- 积分与排名 -->


<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">
    
        <div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
            <h3 class="catListTitle">
                

随笔档案
<span style="font-size:11px;font-weight:normal">(100)</span>


            </h3>


            <ul>

                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2016/01.html" rel="" target="">
    2016年1月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/11.html" rel="" target="">
    2015年11月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/09.html" rel="" target="">
    2015年9月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/08.html" rel="" target="">
    2015年8月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/06.html" rel="" target="">
    2015年6月(4)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/05.html" rel="" target="">
    2015年5月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2015/04.html" rel="" target="">
    2015年4月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2014/05.html" rel="" target="">
    2014年5月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2014/04.html" rel="" target="">
    2014年4月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2014/02.html" rel="" target="">
    2014年2月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/11.html" rel="" target="">
    2013年11月(3)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/05.html" rel="" target="">
    2013年5月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/04.html" rel="" target="">
    2013年4月(6)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/03.html" rel="" target="">
    2013年3月(4)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/02.html" rel="" target="">
    2013年2月(2)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2013/01.html" rel="" target="">
    2013年1月(17)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2012/12.html" rel="" target="">
    2012年12月(19)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2012/11.html" rel="" target="">
    2012年11月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2012/09.html" rel="" target="">
    2012年9月(1)
</a>
 

                        </li>
                        <li>
                            
<a href="https://www.cnblogs.com/qwertWZ/archive/2012/07.html" rel="" target="">
    2012年7月(28)
</a>
 

                        </li>

            </ul>


        </div>

</div>

<!-- 最新评论 -->




<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block">
    <div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4510857.html">
                            1. 使用Apriori算法和FP-growth算法进行关联分析(71819)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4510859.html">
                            2. 《机器学习实战》学习笔记(17350)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/03/26/2982231.html">
                            3. Git忽略规则(12222)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4582096.html">
                            4. k-近邻算法(11809)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/04/22/3036829.html">
                            5. SQL Server 2005 存储过程(9035)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4576250.html">
                            6. 机器学习基础(6653)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/07/06/2580117.html">
                            7. 当前网络存在的安全问题(6406)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4960755.html">
                            8. 决策树(4308)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/07/06/2580107.html">
                            9. J2EE的13种核心技术规范(4260)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/04/04/2999434.html">
                            10. Subversion命令汇总(3975)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/01/28/2880196.html">
                            11. 常用C库简介(3644)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/09/03/2669144.html">
                            12. 数独生成算法(3370)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/07/06/2579397.html">
                            13. Android ListView 横向滑动删除 Item(3166)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/05/05/3061743.html">
                            14. 《SQL Server 2005 编程入门经典》第一到十二章(2920)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/05/13/3075482.html">
                            15. Jpcap Tutorial(2514)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/07/20/2600909.html">
                            16. printf 函数中的格式转化字符及其含义(2499)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/12/27/2835899.html">
                            17. 《设计模式之禅》学习笔记（八）(2436)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/p/4582265.html">
                            18. 《设计模式之禅》学习笔记(2371)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2013/01/26/2878150.html">
                            19. C预处理器(2258)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/qwertWZ/archive/2012/12/31/2840873.html">
                            20. yum软件包管理器(2091)
                        </a>
                    </li>
        </ul>
    </div>
</div>


</div>

<!-- 评论排行榜 -->


<!-- 推荐排行榜 -->
</div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright © 2019 qwertWZ
<br><span id="poweredby">Powered by .NET Core 3.0.0 on Linux</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <script language="javascript" type="text/javascript">
//生成目录索引列表
function GenerateContentList()
{
    var jquery_h3_list = $('#cnblogs_post_body h1');
    if(jquery_h3_list.length>0)
    {
        var content = '<a name="_labelTop"></a>';
        content    += '<div id="navCategory">';
        content    += '<p style="font-size:18px"><b>目录</b></p>';
        content    += '<ul>';
        for(var i =0;i<jquery_h3_list.length;i++)
        {
            var go_to_top = '<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label' + i + '"></a></div>';
            $(jquery_h3_list[i]).before(go_to_top);
            var li_content = '<li><a href="#_label' + i + '">' + $(jquery_h3_list[i]).text() + '</a></li>';
            content += li_content;
        }
        content    += '</ul>';
        content    += '</div>';
        if($('#cnblogs_post_body').length != 0 )
        {
            $($('#cnblogs_post_body')[0]).prepend(content);
        }
    }    
}
GenerateContentList();
</script>
    </div>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; min-width: 0px; max-width: none; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Math-italic, sans-serif;"></div></div></body></html>